import{_ as ve}from"./_commonjsHelpers.86de73f2.js";import{_ as me,a as ge,b as pe}from"./copy.ac3b57f3.js";import{c as fe}from"./content.8ac9cfa6.js";import{a as _e,r as a,b as Ae,f as he,N as Ee,w as Te,h as k,W as Ce,i as m,y as i,x as H,j as c,k as s,m as Ne,o as d,F as L,s as D,l as ye,u as b,A as w,U as Se,c as ee,C as be,D as we,G as Ve}from"./entry.d811778a.js";const Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAzZJREFUWEftlzFrFEEUx997uyQWFilSpDCddhYRBWMpRoigWBjQgKAHubldkg8QQUmCgvoBws3tHVwEwSsiCiomYJEioI2Ywk7BQguLFCksQm53nhm5g2NvLpndvYMDc+XevDe//b+3M/+H0Oc/7HM+OALMWqH/R8Hl5eURIhomojAMw53Z2dnfWdXT8akVrFarQ/V6fUYpNUlEZ5l5KAb0BxE/AcB6vV5/nhY4MaBWamBg4KFS6i4AuJYq7QKADMPwaVLQRIBBENwCgKJBLUtO2GZm3/O8VR1QLBavEtFtZl7xPG/NlMQasFwuLyilFg1JNgHgHTNvEdG/voui6AQRnWbmCUS8FI8hokXXdUt7e3s/AOAYAOi+HTWpawUopfQQsdi6ESLWiOjBzMzM94PkC4JgTL8YIl6Pxa8y81TzGSKeEUJsxXNZAZZKpRUAuNMI3kXEnBCiZltXvU63BzNXG4q1hWYClFKeQ8RXuhRElMvn8xtJ4JprgyCYYOY3JshMgGlgOsU0lHzRVsosJe4moM4lpawh4s1YT6bvwW4DViqVk1EUfetbwMZH85GZx7vyFXdbQZ2vVCrNA8Dj1IA2p3wWcCnlJCK+TwVYrVZHbE75LID6AGfmL6kAbYOzADZE+NkwHNpMjBYKhW2rmyQOyMxXOl3mWSB1mQFAm4Wa7/tvTbmMV10cEADuFQqFJ1lg0sZaAWrjKYS4kHaTLHFWgHoDx3FOHeZcsoB0irUG1PZKCDHdC4iDcloD6iSIOJ3UZmV9oUSAAKC94DUhxIc0G5fL5fEoiuYAYNPzPGmTIymgztkVw6qUuuj7/qG+0hbwJQDciL3xa0RcMtn01nXauYRh+Mhgry7bVMIIaDrllVJzRLTQdtIjbjDzulLqq+M4v/T/SqkRRBzTc0irY2nGKqWWfN83DWBtVe84k5hOeSnlVGN4GrbpH8OaHWbON8dOmxxWQ1NrIj24O44zj4iFTgOQYeOQmZ9FUXS/p4N7HNR1XT2pXd23TecB4HgMTKv1GQDWBgcHK7lcbsdGMSuzkCaRVtZ13SGllLvfr9tJlUp0k6QB7FVM4h7sFciRgr1Stu9L/BdiCqc4bUVXegAAAABJRU5ErkJggg==";const f=T=>(be("data-v-585ff0e2"),T=T(),we(),T),Ue={class:"cEdit"},ke=["id"],Le={key:1,class:"incompatible"},Me=f(()=>i("div",{class:"incompatible-top"},"浏览器版本过低，请更新版本",-1)),Oe={class:"incompatible-content"},xe={class:"modalHeader"},Be={key:0,class:"modalHeader-item"},Re=["src"],He={class:"modalHeader-item"},De=f(()=>i("img",{src:Ie,class:"pointer refresh"},null,-1)),We={class:"modal-content"},Ge={class:"modalFooter"},Fe=f(()=>i("img",{src:me},null,-1)),Qe=f(()=>i("div",null,"插入",-1)),Ye=f(()=>i("img",{src:ge},null,-1)),Je=f(()=>i("div",null,"替换",-1)),$e=f(()=>i("img",{src:pe},null,-1)),Ze=f(()=>i("div",null,"复制",-1)),Ke=_e({__name:"cEdit",props:{content:{type:String,default:""},isAction:{type:Boolean,default:!1}},emits:["update:content"],setup(T,{expose:te,emit:ae}){const _=T,M=a("");a("");let r=null;const W=Ae(),G=a(""),F=a(""),Q=a(""),Y=a(""),J=a(""),$=a(""),Z=a(""),ne=a(""),K=a(!0),{proxy:o}=Ne(),V=a(!1),C=a(null),le=a(""),A=a(""),h=a(!1),I=a(!1),U=a(!1),X=a([]),g=a(!1),u=a(""),N=a(!1),O=a(""),oe=a([{name:"正式"},{name:"非正式"},{name:"幽默"},{name:"讽刺"},{name:"严肃"},{name:"热情"},{name:"冷静"},{name:"友好"},{name:"命令"},{name:"哀悼"},{name:"鼓励"},{name:"好奇"},{name:"怀疑"},{name:"权威"},{name:"亲切"}]),y=a("英语"),S=a(),z=a([]);clearInterval(C.value),he(()=>{G.value=window.location.origin+"/image/create/continue.svg",F.value=window.location.origin+"/image/create/polish.svg",Q.value=window.location.origin+"/image/create/rewrite.svg",Y.value=window.location.origin+"/image/create/expand.svg",J.value=window.location.origin+"/image/create/abbreviation.svg",$.value=window.location.origin+"/image/create/tone.svg",Z.value=window.location.origin+"/image/create/translate.svg",ne.value=window.location.origin+"/image/create/hightWriting.svg";let t=[{type:"CONTINUED_WRITING",name:"续写",img:G.value},{type:"POLISHING",name:"润色",img:F.value},{type:"REWRITE",name:"改写",img:Q.value},{type:"EXPAND_WRITE_ARTILE",name:"扩写",img:Y.value},{type:"ABBREVIATION",name:"缩写",img:J.value},{type:"CHNAGE_TONE",name:"修改语气",img:$.value},{type:"TRANSLATE",name:"翻译",img:Z.value}];X.value=t;let e=[];o.$api.queryTagTemplateList({type:"SCENE_TYPE"}).then(n=>{n.data.length>0?n.data.forEach((v,E)=>{t.forEach((p,R)=>{v.description==p.type&&e.push({id:v.description,icon:"<img src="+p.img+"/>",onClick:()=>{P(v.description)}}),E==Number(n.data.length-1)&&R==Number(t.length-1)&&q(e)})}):q([])})});const x=a(""),se=()=>{let t=r.getMarkdown();x.value=t,ae("update:content",t)},P=o.$debounce(t=>{if(le.value=r.getSelectedText(),A.value=t,t=="CHNAGE_TONE"){I.value=!0,S.value=["正式"];return}if(t=="TRANSLATE"){o.$api.queryTagTemplateList({type:"LANGUAGE_TYPE"}).then(e=>{z.value=e.data}),U.value=!0,y.value="英语";return}if(t=="HIGH_LEVEL_WRITTING"){toAction({state:!0,type:"HIGH_LEVEL_WRITTING"}),r&&r.getSelectedText()&&(selectText.value=JSON.parse(JSON.stringify(r.getSelectedText())));return}h.value=!0,W.resetStream(),setTimeout(()=>{let e={content:r.getSelectedText(),sceneType:t};N.value=!0,g.value=!0,u.value="",o.$setAiChat(o,e,"",n=>{n&&n.content&&(u.value=u.value+""+n.content,N.value=!1),n.type=="[ONCOMPLETED]"&&(g.value=!1)})},1e3)}),B=o.$debounce(t=>{if(g.value){o.$Message.error("生成中，请稍后");return}if(o.$isEmpty(u.value)){o.$Message.error("请生成");return}if(t=="insertion"){let n=r.getSelectedText()+`
`+u.value;r.focus().insert(n)}t=="switch"&&r.focus().insert(u.value),t=="copy"&&o.$CopyTex(u.value),u.value="",h.value=!1},300),ie=()=>{if(S.value.length==0){o.$Message.error("请选择");return}let t=S.value.join(",");O.value=JSON.stringify({tone:t}),I.value=!1,j(A.value)},re=o.$debounce(()=>{if(o.$isEmpty(y.value)){o.$Message.error("请选择");return}O.value=JSON.stringify({language:y.value}),U.value=!1,j(A.value)},300),q=t=>{M.value=ue(4),setTimeout(()=>{let e=document.getElementById(M.value);ve(()=>import("./index.724bfb4c.js"),[],import.meta.url).then(({AiEditor:n})=>{r=new n({element:e,placeholder:"点击输入内容...",content:"",toolbarKeys:["undo","redo","brush","eraser","|","heading","font-family","font-size","|","bold","italic","underline","strike","link","code","subscript","superscript","hr","todo","emoji","|","highlight","font-color","|","align","line-height","|","bullet-list","ordered-list","indent-decrease","indent-increase","break","|","attachment","quote","code-block","table","|","source-code","printer","fullscreen"],textSelectionBubbleMenu:{enable:_.isAction,items:t},onChange:()=>{se()}})}).catch(()=>{K.value=!1})},100)},j=o.$debounce(t=>{h.value=!0,A.value=t,u.value="",W.resetStream(),setTimeout(()=>{let e={content:r.getSelectedText(),sceneType:t,sceneData:O.value};N.value=!0,g.value=!0,u.value="",o.$setAiChat(o,e,"",n=>{n&&n.content&&(u.value=u.value+""+n.content,N.value=!1),n.type=="[ONCOMPLETED]"&&(g.value=!1)})},1e3)},300),ue=t=>{let e="",n=new Date().getTime().toString();const v="ABCDEFGHIJKLMNOPQRSTUVWXYZ",E=v.length;for(let p=0;p<t;p++)e+=v.charAt(Math.floor(Math.random()*E));return e+""+n},ce=()=>{clearInterval(C.value),V.value===!1&&(C.value=setInterval(()=>{if(r&&!o.$isEmpty(_.content)){let t=JSON.parse(JSON.stringify(_.content));const e=/[.\s-]+$/;e.test(t)&&(t=t.replace(e,"")+" "),r.setContent(t),V.value=!0,clearInterval(C.value)}},100))},de=()=>{V.value=!1,x.value=" "};return Ee(()=>{clearInterval(C.value)}),Te(()=>_.content,()=>{V.value=!1,x.value!=_.content&&ce()},{deep:!0,immediate:!0}),te({clearContentData:de}),(t,e)=>{const n=k("Button"),v=k("Modal"),E=k("Option"),p=k("Select"),R=Ce("load");return d(),m("div",Ue,[K.value?(d(),m("div",{key:0,id:M.value,class:"cEdit-content"},null,8,ke)):(d(),m("div",Le,[Me,i("div",Oe,H(_.content),1)])),c(v,{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=l=>h.value=l),width:"504",mask:!1,closable:!1,"z-index":"3000"},{header:s(()=>[i("div",xe,[(d(!0),m(L,null,D(X.value,l=>(d(),m(L,null,[l.type==A.value?(d(),m("div",Be,[i("img",{src:l.img,class:"item-img"},null,8,Re)])):ye("",!0)],64))),256)),i("div",He,[De,i("div",{class:"pointer",onClick:e[0]||(e[0]=l=>b(P)(A.value))},"重新生成")])])]),footer:s(()=>[i("div",Ge,[c(n,{class:"modalFooter-btn",loading:g.value,onClick:e[1]||(e[1]=l=>b(B)("insertion"))},{default:s(()=>[Fe,Qe]),_:1},8,["loading"]),c(n,{class:"modalFooter-btn",loading:g.value,onClick:e[2]||(e[2]=l=>b(B)("switch"))},{default:s(()=>[Ye,Je]),_:1},8,["loading"]),c(n,{class:"modalFooter-btn",loading:g.value,onClick:e[3]||(e[3]=l=>b(B)("copy"))},{default:s(()=>[$e,Ze]),_:1},8,["loading"]),c(n,{onClick:e[4]||(e[4]=l=>h.value=!1)},{default:s(()=>[w("关闭")]),_:1})])]),default:s(()=>[Se((d(),m("div",We,[c(fe,{content:u.value},null,8,["content"])])),[[R,N.value]])]),_:1},8,["modelValue"]),c(v,{modelValue:I.value,"onUpdate:modelValue":e[7]||(e[7]=l=>I.value=l),mask:!1,title:"修改语气","z-index":"3000"},{footer:s(()=>[c(n,{type:"primary",onClick:ie},{default:s(()=>[w("确认")]),_:1})]),default:s(()=>[c(p,{class:"content-item-select",multiple:"",modelValue:S.value,"onUpdate:modelValue":e[6]||(e[6]=l=>S.value=l)},{default:s(()=>[(d(!0),m(L,null,D(oe.value,l=>(d(),ee(E,{value:l.name,key:l.name},{default:s(()=>[w(H(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),c(v,{modelValue:U.value,"onUpdate:modelValue":e[9]||(e[9]=l=>U.value=l),mask:!1,title:"翻译"},{footer:s(()=>[c(n,{type:"primary",onClick:b(re)},{default:s(()=>[w("确认")]),_:1},8,["onClick"])]),default:s(()=>[c(p,{class:"content-item-select",modelValue:y.value,"onUpdate:modelValue":e[8]||(e[8]=l=>y.value=l)},{default:s(()=>[(d(!0),m(L,null,D(z.value,l=>(d(),ee(E,{value:l.cateName,key:l.cateName},{default:s(()=>[w(H(l.cateName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}});const je=Ve(Ke,[["__scopeId","data-v-585ff0e2"]]);export{je as _,Ie as a};
