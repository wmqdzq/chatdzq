import{a as z,e as j,b as Z,r as v,h as x,i as l,j as R,k as L,K as X,o as i,y as u,F as b,s as H,v as N,x as S,l as k,A as T,m as V,C as Y,D as q,G as P}from"./entry.d811778a.js";import{_ as J}from"./robot.23bfda18.js";const $="data:image/png;base64,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",ee="data:image/png;base64,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",G=f=>(Y("data-v-947b0f2a"),f=f(),q(),f),oe={class:"exclusive-top"},te=G(()=>u("div",{class:"name"},"添加机器人",-1)),ae={class:"exclusive-top-tabs"},se={key:0,class:"tabs"},le=["onClick"],ie=G(()=>u("div",{class:"tabs-bottom"},null,-1)),Ae={class:"content"},ne={class:"content-top"},ue=["onClick"],re={key:0,class:"robot-list"},ce=["onClick"],de={class:"logo"},me=["src"],ve={key:1,src:J},ge={class:"list-content"},pe={class:"content-title text-hide"},be={class:"content-name text-hide"},Ce={key:0,class:"closed",src:$},he={key:1,class:"closed",src:ee},ye={class:"content-bottom"},fe={class:"name"},Be=z({__name:"exclusiveRobot",props:{templateType:{type:String,default:""},forbiddenList:{type:Array,default:[]},limit:{type:Number,default:-1},showTabs:{type:Boolean,default:!0},robotCode:{type:String,default:""}},emits:["init","onAdd"],setup(f,{expose:Q,emit:U}){const r=f,{proxy:d}=V();j();const _=Z(),n=v(!1),B=v(),g=v(0),C=v([]),c=v([]),h=v(!1),A=v([]),m=v([]),w=v({}),D=e=>{if(h.value=!0,!d.$isEmpty(e)){O(e);return}let s={robotTemplateTypeList:["ROLE","STAR","QUESTION_BANK"]};A.value=[],m.value=[],B.value=s.robotTemplateTypeList[0],g.value=0,n.value=!0,d.$api.getRobotTemplateList(s).then(o=>{let t=o.data,p=[{code:-1,name:"训练机器人",type:"train"}];C.value=p.concat(t),E({type:"train",code:-1})}).catch(()=>{n.value=!1})},O=e=>{n.value=!0;let s={categoryType:e};A.value=[],m.value=[],C.value=[],d.$api.getRobotTemplateListByCategoryType(s).then(o=>{if(o.data&&o.data.length>0)if(e=="AI_ASSISTANT_MODULE"||e=="INTERLIGENT_QA_MODULE"){let t=o.data,p=[{code:-1,name:"训练机器人",type:"train"}];_.clientType=="TEAM"?(C.value=p.concat(t),E({type:"train",code:-1})):(C.value=t,E({type:o.data[0].type,code:o.data[0].code}))}else B.value=o.data[0].type,g.value=0,C.value=o.data,E({type:o.data[0].type,code:o.data[0].code});n.value=!1}).catch(()=>{n.value=!1})},E=e=>{if(B.value=e.type,g.value=0,e.code==-1){let s={queryTrainTeamRobotFlag:!0,type:"CHAT"};n.value=!0,d.$api.space_robotQuery(s).then(o=>{n.value=!1,c.value=[],c.value.push({cateLogo:"",categoryCode:"",categoryName:"",categoryType:"",robotInfoList:[],embeddedWebsiteKey:""}),o.data.forEach(t=>{c.value[0].robotInfoList.push({collectRelationCode:"",favoriteFlag:!1,remark:"",robotCode:t.code,robotLogo:t.robotLogo,robotName:t.name,styleSetup:t.styleSetup,embeddedWebsiteKey:t.embeddedWebsiteKey})})}).catch(()=>{n.value=!1})}else F()},W=e=>{g.value=e},F=()=>{let e={templateType:B.value};n.value=!0,d.$api.getRobotListByTemplateType(e).then(s=>{c.value=s.data,n.value=!1,c.value.forEach(o=>{o.robotInfoList.forEach(t=>{t.isSelect=m.value.indexOf(t.robotCode)!=-1})})}).catch(()=>{n.value=!1})},M=(e,s)=>{if(r.templateType=="appColumn")w.value={id:"",remark:e.remark,robotCode:e.robotCode,robotLogo:e.robotLogo,robotName:e.robotName,styleSetup:e.styleSetup,embeddedWebsiteKey:e.embeddedWebsiteKey},A.value=[{robotCode:e.robotCode,robotCategoryId:s.categoryCode,robotName:e.robotName,robotRemark:e.robotRemark?e.robotRemark:e.remark,robotLogo:e.robotLogo}],m.value=[],m.value=[e.robotCode],c.value.forEach(o=>{o.robotInfoList&&o.robotInfoList.length>0&&o.robotInfoList.forEach(t=>{t.isSelect=!1,t.robotCode==e.robotCode&&(t.isSelect=!0)})});else{if(r.forbiddenList.indexOf(e.robotCode)!=-1)return;let o=!0,t=-1;e.isSelect=!e.isSelect,A.value.length==0?(A.value.push({robotCode:e.robotCode,robotCategoryId:s.categoryCode,robotName:e.robotName,robotRemark:e.robotRemark?e.robotRemark:e.remark,robotLogo:e.robotLogo}),m.value.push(e.robotCode)):A.value.forEach((p,a)=>{p.robotCode==e.robotCode&&(o=!1,t=a),a==Number(A.value.length-1)&&(o==!0?(A.value.push({robotCode:e.robotCode,robotCategoryId:s.categoryCode,robotName:e.robotName,robotRemark:e.robotRemark?e.robotRemark:e.remark,robotLogo:e.robotLogo}),m.value.push(e.robotCode)):(A.value.splice(t,1),m.value.splice(m.value.indexOf(e.robotCode),1)))})}},K=()=>{if(A.value.length==0){d.$Message.error("请选择");return}if(Number(r.limit)>0&&A.value.length>Number(r.limit)){d.$Message.error("最多可选择"+r.limit+"个机器人");return}if(!d.$isEmpty(r.robotCode)&&A.value.some(s=>s.robotCode===r.robotCode)){d.$Message.error("不能选择当前机器人");return}r.templateType=="appColumn"?(U("onAdd",w.value),h.value=!1):(U("init",A.value),h.value=!1)};return Q({showFn:D}),(e,s)=>{const o=x("Spin"),t=x("Button"),p=X;return i(),l("div",null,[R(p,{modelValue:h.value,"onUpdate:modelValue":s[1]||(s[1]=a=>h.value=a),size:"large","footer-hide":!0,"class-name":"modalPromptMain",closable:!1,"mask-closable":!1},{header:L(()=>[u("div",oe,[te,u("div",ae,[r.showTabs?(i(),l("div",se,[(i(!0),l(b,null,H(C.value,(a,y)=>(i(),l("div",{class:N(["tabs-item",B.value==a.type?"active":""]),onClick:I=>E(a),key:y},[u("div",null,S(a.name),1),ie],10,le))),128))])):k("",!0)])])]),default:L(()=>[u("div",Ae,[R(o,{fix:"",show:n.value},{default:L(()=>[T("加载中...")]),_:1},8,["show"]),u("div",ne,[(i(!0),l(b,null,H(c.value,(a,y)=>(i(),l(b,null,[a.categoryName?(i(),l("div",{key:0,class:N(["content-top-item",g.value==y?"active":""]),onClick:I=>W(y)},S(a.categoryName),11,ue)):k("",!0)],64))),256))]),c.value[g.value]?(i(),l("div",re,[(i(!0),l(b,null,H(c.value[g.value].robotInfoList,(a,y)=>(i(),l("div",{class:"robot-list-item",onClick:I=>M(a,c.value[g.value]),key:y},[u("div",de,[a.robotLogo?(i(),l("img",{key:0,src:a.robotLogo},null,8,me)):(i(),l("img",ve))]),u("div",ge,[u("div",pe,S(a.robotName),1),u("div",be,S(a.remark),1)]),r.forbiddenList.indexOf(a.robotCode)==-1?(i(),l(b,{key:0},[a.isSelect?(i(),l("img",he)):(i(),l("img",Ce))],64)):k("",!0)],8,ce))),128))])):k("",!0)]),u("div",ye,[u("div",fe,"已选择"+S(A.value.length)+"个",1),R(t,{class:"content-bottom-btn",type:"primary",loading:n.value,onClick:K},{default:L(()=>[r.templateType=="appColumn"?(i(),l(b,{key:0},[T("使用")],64)):(i(),l(b,{key:1},[T("确认")],64))]),_:1},8,["loading"]),R(t,{onClick:s[0]||(s[0]=a=>h.value=!1)},{default:L(()=>[T("取消")]),_:1})])]),_:1},8,["modelValue"])])}}});const Se=P(Be,[["__scopeId","data-v-947b0f2a"]]);export{Se as _};
