import{_ as _e}from"./electricCom.fe3eb12e.js";import{_ as pe}from"./cEdit.38c1a167.js";import{_ as me}from"./addBase.6bac7936.js";import{a as fe,r as s,f as he,h as f,W as ge,i as v,F as N,y as e,j as l,k as c,U as x,V as U,s as $,l as A,c as V,x as T,u as O,m as ye,C as be,D as Ce,o as d,A as g,G as Le}from"./entry.b3d0478f.js";import we from"./upload.f34ff5e2.js";import{c as ke}from"./content.2ef9ea5b.js";import"./_commonjsHelpers.86de73f2.js";import"./copy.ac3b57f3.js";import"./robot.23bfda18.js";import"./_commonjs-dynamic-modules.302442b1.js";import"./ossUploaderNew.bc250fbe.js";import"./upload.1da94f3c.js";import"./svga.4b61c129.js";import"./loding.3cd02d06.js";import"./stringify.f484c508.js";const p=C=>(be("data-v-6cf73bae"),C=C(),Ce(),C),Ne={class:"highLevelWriting"},Te={class:"highLevelWriting-content"},Ee=p(()=>e("div",{class:"content-title"},"高级写作",-1)),Ie={class:"content-main"},xe={class:"content-form"},$e={class:"form-item"},Ve={class:"form-item"},Oe=p(()=>e("div",{class:"input-title"},"文案类型",-1)),Me={class:"form-item-dropdown"},Re={class:"dropdown-top"},Se={class:"dropdown-content"},De={class:"form-item"},Ge={class:"item-title pointer"},We=p(()=>e("div",null,"高级设置",-1)),Ue={class:"item-input"},Ae=p(()=>e("div",{class:"input-title"},"语言风格",-1)),Be={class:"item-input"},Fe=p(()=>e("div",{class:"input-title"},"字数限制",-1)),He={class:"form-item"},ze={class:"item-title"},Pe={style:{display:"flex","align-items":"center"}},Je=p(()=>e("div",null,"参考素材",-1)),je={key:0,class:"item-file"},qe={class:"file-item"},Ke=["title"],Ye={class:"file-item-ico"},Qe={class:"file-item"},Xe=["title"],Ze={class:"file-item-ico"},et={class:"file-choose"},tt=p(()=>e("div",null,"从知识库选择",-1)),ot=p(()=>e("div",{class:"file-division"},null,-1)),nt=p(()=>e("div",null,"上传文件和添加网页",-1)),lt={class:"highLevelWriting-bottom"},st=p(()=>e("div",{class:"bottom-title"},null,-1)),at={key:1,class:"continue"},it={class:"continue-title"},ut={class:"continue-content"},ct={style:{padding:"0 16px",height:"100%"}},dt={class:"continue-bottom"},rt={class:"bottom-left"},vt={class:"bottom-right"},_t=fe({__name:"highLevelWriting",props:{electricity:{type:Object,default:{}}},emits:["submit"],setup(C,{expose:K,emit:Y}){const{proxy:r}=ye(),M=s(!1),L=s("");s("HIGH_LEVEL_WRITTING");const B=s(),R=s(""),S=s(""),h=s(!1),D=s(!1),G=s(""),F=s([]),a=s([]),i=s([]),H=s(),m=s(""),w=s(!1),z=s(!1),E=s(1),u=s({articleType:"",languageType:"",wordCount:"",searchFlag:!1,resourceCodeList:[],websiteList:[],knowledgeCodeList:[]}),P=s([]),J=r.$debounce(o=>{D.value=!0,h.value=!0,G.value=o,r.$api.queryTagTemplateList({type:o}).then(t=>{h.value=!1,P.value=t.data}).catch(()=>{h.value=!1})},300),Q=()=>{h.value=!0,r.$api.queryTagTemplateList({type:"LANGUAGE_STYLE"}).then(o=>{h.value=!1,F.value=o.data}).catch(()=>{h.value=!1})},X=o=>{D.value=!1,R.value=o.cateName,u.value.articleType=o.cateName},j=o=>{if(Number(Number(a.value.length)+Number(i.value.length))>=5){r.$Message.error("参考素材数量最大为5");return}o==1&&B.value.showFn(a.value),o==2&&H.value.showFn()},Z=o=>{S.value=o.cateName,u.value.languageType=o.cateName},ee=o=>{if(Number(Number(a.value.length)+Number(i.value.length)+Number(o.length))>=5){r.$Message.error("参考素材数量最大为5");return}o.forEach(t=>{a.value.push(t)})},te=o=>{if(Number(Number(a.value.length)+Number(i.value.length)+Number(o.length))>=5){r.$Message.error("参考素材数量最大为5");return}i.value=i.value.concat(o)},oe=r.$debounce(()=>{if(r.$isEmpty(L.value)){r.$Message.error("请输入描述");return}if(Number(u.value.wordCount)>1e4){r.$Message.error("字数限制应小于10000");return}u.value.knowledgeCodeList=[],u.value.resourceCodeList=[],u.value.websiteList=[],M.value=!0,a.value.length==0&&i.value.length==0&&I(),a.value.length>0&&i.value.length>0&&a.value.forEach((o,t)=>{u.value.knowledgeCodeList.push(o.code),t==Number(a.value.length-1)&&i.value.forEach((y,_)=>{y.type=="websiteList"&&u.value.websiteList.push(y.name),y.type=="resourceCodeList"&&u.value.resourceCodeList.push(y.code),_==Number(i.value.length-1)&&I()})}),a.value.length>0&&i.value.length==0&&a.value.forEach((o,t)=>{u.value.knowledgeCodeList.push(o.code),t==Number(a.value.length-1)&&I()}),a.value.length==0&&i.value.length>0&&i.value.forEach((o,t)=>{o.type=="websiteList"&&u.value.websiteList.push(o.name),o.type=="resourceCodeList"&&u.value.resourceCodeList.push(o.code),t==Number(i.value.length-1)&&I()})},300),I=()=>{let o={content:L.value,sceneType:"HIGH_LEVEL_WRITTING",sceneData:JSON.stringify(u.value)};m.value="",r.$setAiChat(r,o,"",t=>{t&&t.content&&(w.value=!0,M.value=!1,E.value=2,m.value=m.value+""+t.content),t.type=="[ONCOMPLETED]"&&(w.value=!1)})},ne=r.$debounce(()=>{Y("submit",m.value)},300);return he(()=>{Q()}),K({setOutContent:o=>{L.value=JSON.parse(JSON.stringify(o))}}),(o,t)=>{const y=f("Input"),_=f("Icon"),W=f("TabPane"),le=f("Tabs"),b=f("Button"),q=f("Dropdown"),se=f("DropdownItem"),ae=f("DropdownMenu"),ie=f("Tooltip"),ue=_e,ce=pe,de=me,re=ge("load");return d(),v("div",Ne,[E.value==1?(d(),v(N,{key:0},[e("div",Te,[Ee,e("div",Ie,[e("div",xe,[e("div",$e,[l(y,{class:"item-textarea",modelValue:L.value,"onUpdate:modelValue":t[0]||(t[0]=n=>L.value=n),maxlength:6e3,"show-word-limit":!0,type:"textarea",rows:6,placeholder:"请描述你的角色、创作背景、创作目的，让我更好的为你生成文章"},null,8,["modelValue"])]),e("div",Ve,[l(q,{trigger:"click",visible:D.value},{list:c(()=>[e("div",Me,[e("div",Re,[l(le,{modelValue:G.value,"onUpdate:modelValue":t[3]||(t[3]=n=>G.value=n),onOnClick:t[4]||(t[4]=n=>O(J)(n))},{default:c(()=>[l(W,{name:"SHORT_LONG_ARTICLE",label:"短长文"}),l(W,{name:"PICTURE_ARTICLE",label:"图文类"}),l(W,{name:"GENERAL_OFFICE",label:"通用办公"})]),_:1},8,["modelValue"])]),x((d(),v("div",Se,[(d(!0),v(N,null,$(P.value,n=>(d(),V(b,{class:"content-btn",onClick:k=>X(n)},{default:c(()=>[g(T(n.cateName),1)]),_:2},1032,["onClick"]))),256))])),[[re,h.value]])])]),default:c(()=>[e("div",{class:"item-input",onClick:t[2]||(t[2]=n=>O(J)("SHORT_LONG_ARTICLE"))},[Oe,x(e("input",{placeholder:"文案类型","onUpdate:modelValue":t[1]||(t[1]=n=>R.value=n),readonly:""},null,512),[[U,R.value]]),l(_,{type:"ios-arrow-down"})])]),_:1},8,["visible"])]),e("div",De,[e("div",Ge,[We,l(_,{type:"ios-arrow-down"})]),l(q,{trigger:"click","transfer-class-name":"dropdown-transfer-class-name"},{list:c(()=>[l(ae,null,{default:c(()=>[(d(!0),v(N,null,$(F.value,n=>(d(),V(se,{onClick:k=>Z(n)},{default:c(()=>[g(T(n.cateName),1)]),_:2},1032,["onClick"]))),256))]),_:1})]),default:c(()=>[e("div",Ue,[Ae,x(e("input",{placeholder:"语言风格","onUpdate:modelValue":t[5]||(t[5]=n=>S.value=n),readonly:""},null,512),[[U,S.value]]),l(_,{type:"ios-arrow-down"})])]),_:1}),e("div",Be,[Fe,x(e("input",{placeholder:"请输入期望字数",type:"number",min:1,max:1e4,"onUpdate:modelValue":t[6]||(t[6]=n=>u.value.wordCount=n)},null,512),[[U,u.value.wordCount]])])]),e("div",He,[e("div",ze,[e("div",Pe,[Je,l(ie,{"max-width":"200",content:"使用你文件中的内容进行引用生成，生成有理有据的文章"},{default:c(()=>[l(_,{type:"md-information-circle",color:"#cccccc",size:"16",class:"pointer"})]),_:1})])]),a.value.length>0||i.value.length>0?(d(),v("div",je,[(d(!0),v(N,null,$(a.value,(n,k)=>(d(),v("div",qe,[e("div",{class:"file-item-name text-hide-1",title:n.name},T(n.name),9,Ke),e("div",Ye,[l(_,{type:"ios-trash",size:"20",class:"pointer",color:"#999999",onClick:ve=>a.value.splice(k,1)},null,8,["onClick"])])]))),256)),(d(!0),v(N,null,$(i.value,(n,k)=>(d(),v("div",Qe,[e("div",{class:"file-item-name text-hide-1",title:n.name},T(n.name),9,Xe),e("div",Ze,[l(_,{type:"ios-trash",size:"20",class:"pointer",color:"#999999",onClick:ve=>i.value.splice(k,1)},null,8,["onClick"])])]))),256))])):A("",!0),e("div",et,[e("div",{class:"choose-item pointer",onClick:t[7]||(t[7]=n=>j(1))},[l(_,{type:"md-book",size:"20"}),tt]),ot,e("div",{class:"choose-item pointer",onClick:t[8]||(t[8]=n=>j(2))},[l(_,{type:"md-add",size:"20"}),nt])])])])])]),e("div",lt,[st,l(ue,{type:"HIGH_LEVEL_WRITTING",data:C.electricity},{content:c(()=>[l(b,{type:"primary",style:{flex:"1"},class:"bottom-btn",loading:M.value,onClick:O(oe)},{default:c(()=>[g("立即生成")]),_:1},8,["loading","onClick"])]),_:1},8,["data"])])],64)):A("",!0),E.value==2?(d(),v("div",at,[e("div",it,[l(b,{onClick:t[9]||(t[9]=n=>E.value=1)},{default:c(()=>[g("返回")]),_:1})]),e("div",ut,[e("div",ct,[z.value?(d(),V(ce,{key:0,content:m.value,"onUpdate:content":t[10]||(t[10]=n=>m.value=n)},null,8,["content"])):(d(),V(ke,{key:1,content:m.value},null,8,["content"]))])]),e("div",dt,[e("div",rt,"字数："+T(m.value.length),1),e("div",vt,[l(b,{class:"btn",loading:w.value,onClick:t[11]||(t[11]=n=>o.$CopyTex(m.value))},{default:c(()=>[g("复制")]),_:1},8,["loading"]),l(b,{class:"btn",loading:w.value,onClick:O(ne)},{default:c(()=>[g("插入正文")]),_:1},8,["loading","onClick"]),l(b,{class:"btn",loading:w.value,onClick:t[12]||(t[12]=n=>z.value=!0)},{default:c(()=>[g("编辑")]),_:1},8,["loading"])])])])):A("",!0),l(we,{ref_key:"uploadModalRef",ref:H,onSubmit:te},null,512),l(de,{ref_key:"addBaseRef",ref:B,onInit:ee,limit:5},null,512)])}}});const $t=Le(_t,[["__scopeId","data-v-6cf73bae"]]);export{$t as default};
