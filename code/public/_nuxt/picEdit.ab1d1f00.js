import{a as Ne,r as t,e as _e,b as Je,a1 as Me,f as ke,w as L,h as P,c as Ge,k as d,m as Le,J as Qe,_ as Te,o as A,j as c,y as a,i as C,s as Ke,x as R,F as Q,U as ve,V as de,l as T,A as b,u as y,C as Ve,D as Xe,G as Be}from"./entry.d811778a.js";import{_ as We}from"./svga.1e6ae788.js";import{_ as Ue}from"./close.a046fc4f.js";import{_ as ze}from"./electric.251d62b3.js";import pe from"./lexicon.d1bda68a.js";import qe from"./associate.aea4baeb.js";import Ze from"./prompt.8814ced4.js";import{l as Ye}from"./loadImg.56ed4b6f.js";import"./_commonjsHelpers.86de73f2.js";import"./_commonjs-dynamic-modules.302442b1.js";import"./nodata.940b7a96.js";const Fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAABCJJREFUSEu9VV9MW1UY/50+dDRpZws+3HNNdIEVk41EBaY+0IUxJRE0dC/AogbRYOiLbDz4QtjAJfNhZsynEnkYizOjPq2MYYJxbGUPKi0jGcSE0iGJ3nsJAnUldiHkHvcdaKWl/PFl5+3+Od/v/P5832F4Bos9Awz8LxDOeRsAL4BDjLE50zQ/Ngzj970Oum8QVVXPCyG6SipfhOouwPjtWaxoCSGEqDIM4+5uQPsCURTlI8bY1eqW11D9aamsJwTQ6xtGLKKvJJPJwng8Ht8JaEcQRVEqSZZNaZqKyvghX29NRp3k4zVc9AaQTKzdFEIELRZL3DTNyWwJt4GoqkqaXxVCOLNPluew4nAZR3mtGyWVLwECGOmbwEjfg4xfGWP9pml2p8AyQBRFkYYWlSmobilFURmHv3WYxJHPf0aXEb41A21mGS5ul9Ide9edBkgm1jB1b16CxvXVUU3TquhjBgjn/IqLO9o6BuvlRtrUWfUt6trfgOd0SbqYNrOE0I1phIeicKl2+Pw1yFcd6e+zYZ38Euvr66WLi4uT2Uz6D5fzJl9vrdwQi+iSCXlBrLLXsrYKv2+YUiZZUTBoLWmr+LIuIEzTPLWwsBDcxsTmsLZduPOh/Hl8KIpAdwj0bHNYc4dniy+e00dR1/4m9mJSyRgbbTh/XGo98s0ExgamJUhqkd70nmRqvvQW1OKCjQPdiiLwRQjlmx6Fh6Jzuq4XbvOEXnDOR13cXtn+3SmM3ZiSbDoGGzLk8zQeRWzCgO2gVfqRWikg2UZCNBuGcS0niKqq/Qfs1qb2616Eh2YyQMjwy+/f3JBkQqcE4ex1SvzGWtIeo+eDIJ4k1jImQc4Ip9JEsmxlQoUGukOI3I4iz5GHhs6KdL/8MfMXrn3+E2yOA7DZrRSau7qun8gV4TM2h7Un2/ivxj/JMJ3SlEfFHFY5XijKwZ6fUaAeRKv/Hdkrge4QsSmkhtxXhDuC9XBt6QOJKIB/Ek8wePlXRIajIJ/ebimVwLtG+GnH97/w8vPSD2rTVDM2nPPg2HvFG2w2i98f+A2hgSkwxlDd8io8jZvNKoDZiIZe3w9pX7KZyAhTY1U0HJH60qSl09V3evAoYmA6NI+H9+Zl8eONR1DRWII8+389FItoCFwYw4q2+kjX9aKc6VIUpYsxdo4+qsUFbFlPUFo2WDDI/ni91i2LE/jD0XkMXvlFmp1cXZN3DIA5IcTJnAMy5S4NSgDE6hUhxHMWi8XL3fmu5ksnM7x5eonhovd7OvUDIcQkY+xvGvnZl9i+Li3O+RkAPa3+GjnqiRGlirr/x76JdIpyz52sKbzTT1I6Vb0jhDhB05i782WvxCI6SXNW1/Wvd9u7LyZbZOyyWCyfbV5oJE+3pmnB3QByGr/XBvrudDqdu93p2TX+BdpoHzhZh3jSAAAAAElFTkSuQmCC",fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAZBJREFUSEvVljFIQlEUhr83JQli0Bq2RbQEReAS1WBNUQROCQVGU2XOgQ65hRZNQUNRW1HRJC1lREIQ5JK0RFKbQygUbq93RCU1H++pSZ3pDefc7/7nv/eep9CCUFrAQA+yAkwB3XVsZF+rCRbrakEChaQrIFYH5AE404PYgXdNwR4wXwegquQnJSPApaZgFHgpfJthbQGb3wv0IKJC2iWtMxMJMxBR4QOkyGxIbSlqKmm3WfjM5swuXswX06f1jM97snbkyeek3zLGQSqcRGKkXzPi6ZghSK/TYRygmaeqEHIfkIyn/gEkGU/xkc0xON5TpbJpSnzObRQFIrdLvwN5jKeI7t7lT92Mf5hKz5qiZMd/LicHq62Nzi47nqCrTE3DENn9Qt8Gi+HJ/MKnkWvWo16sNksJ1BSItKto+P3FEwOucvMbhhi5MH8OIvPkecI71DEbcOmOzkp1Kioh96GhGy+18vqGe50OxczTIu26OU4YeruKG5wDlrUx2m/Ej4ocGVyreg9kHWvql7Tkl+gLTsTJGlTZnCUAAAAASUVORK5CYII=",me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAActJREFUSEvllktOG0EQhv/uHjuWgWCUIB42kS1FBnaw4aFsfAVOAByBExhOkBzBnCBHcHYosAg7C4MEkRMcwiNjDIMf7SrUimbCYzwycrxI6O101ffXo6tGoMdH9Ng/AgFbhXJSKfoIYMZfiPgUuq4vzc6m7HZCAwHbxeN8SInMYDTsa39xVQcx5+bS8dUnA3b2SxlmmR+PRdEOcFat4bRaQ6slU4vTY0d+EC+CL4flpNY66V5ilu+VFDPxob62ZSJmfLu4Nt9zQtCme1Fr68gFeoDt4vdfAGJ/qej2XDo+ZHx5AFNQQCelFCuWksuJAOV+Ir6eX4GZN4k4R0rY79KJ3XsA1+jzXmk9bFnZtyMvnxRM4dgGM23MT06s3zV81EX/L4CIIeXvgJuaELLkvRR2laLqTRPlioP06CBaxCj+qCA1PIBISHmQrgC200DZdjA9HkOzRTg4ucSbV/3oe2H9IwCj2qlrb2SYlBn1bk1MGF2lqJMH8cwAllJZ05KdHvMuDn5egojXFqYSHwJHxVahlFFK5l8PRBAN/2nDIFjlpoGK0/DdC74bzcwjIWS20wgA2ES88VC97zR1nbrjuxNIpKZ32+3lnv9V3AIDEycoMzmlJAAAAABJRU5ErkJggg==",Pe="data:image/png;base64,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",p=_=>(Ve("data-v-dc5d655a"),_=_(),Xe(),_),He={style:{width:"100%",height:"100%"}},je={class:"modal-title",id:"picEdit-title"},$e={class:"modal-title-close"},et={class:"title-list"},tt={class:"tag"},at={class:"content"},ot={class:"drawPages"},lt={class:"operate"},st={class:"content"},nt={class:"name clearfix"},it=p(()=>a("div",{class:"fl"},[a("span",{class:"red"},"*"),a("span",null,"创意描述")],-1)),ut={class:"area mb-20"},rt={class:"textarea"},ct={class:"textarea-bottom"},vt={class:"textarea-bottom-left"},dt=p(()=>a("img",{src:Fe},null,-1)),pt=p(()=>a("div",null,"智能联想",-1)),mt={class:"tag"},ft=p(()=>a("img",{src:ze},null,-1)),gt=p(()=>a("img",{src:fe},null,-1)),At=p(()=>a("div",null,"词库",-1)),ht=[gt,At],Ct={class:"textarea-bottom-right"},St=p(()=>a("div",{class:"division"},null,-1)),Et=p(()=>a("div",{class:"name clearfix"},[a("div",{class:"fl"},[a("span",null,"不出现内容")])],-1)),It={class:"area mb-20"},Ot={class:"textarea"},Rt={class:"textarea-bottom"},bt={class:"textarea-bottom-left"},wt=p(()=>a("img",{src:fe},null,-1)),Dt=p(()=>a("div",null,"词库",-1)),yt=[wt,Dt],xt={class:"textarea-bottom-right"},Nt=p(()=>a("div",{class:"division"},null,-1)),_t={class:"submit"},Jt={class:"consume"},Mt=p(()=>a("img",{src:Pe},null,-1)),kt={key:0},Gt=["href"],Lt=["innerHTML"],Qt={class:"drawPages-action"},Tt={key:0,class:"loading"},Kt=["src"],Vt=Ne({__name:"picEdit",emits:["close","saveClose"],setup(_,{expose:ge,emit:H}){const J=t(0),m=t(!1);let M=t("");_e();const S=Je(),j=t(""),{proxy:i}=Le(),$=t(),ee=t();t();const k=t(!1),g=t("SD");t(),t(!1);const h=t(""),K=t(!1);t(!1);const r=t(!1),V=t(null),X=t("");t([]),t(!0),t({});const x=t([]);t(!1);const E=t(!1),B=t(!1),W=t(!1),U=t(!1),z=t();t();const te=t();t([]);const Ae=t([]);t(!1);const q=t("1:2");t(!1);const w=t(null),Z=t(null),ae=t(""),I=t({width:"",height:""});t([{key:"SD",value:"Stable Diffusion"}]);const Y=t({pageNo:1,pageSize:10}),he=t([{content:"选模板"},{content:"写描述Al生图"},{content:"元素添加调整"},{content:"添加文案"},{content:"添加二维码"},{content:"预览下载"}]);t({pageNo:1,pageSize:10,tagCode:"",type:"DESIGNER_CATEGORY",total:0}),t("");const Ce=t(""),f=t({}),oe=t([]);t([]);const F=t([]),Se=t([]);t("");const G=t(""),l=t({content:"",negativePrompt:"",sampler:"",steps:50,scale:10,seed:-1,size:"512*1024",num:1}),le=t(""),se=t(""),Ee=t(""),v=t(null);Me(()=>{clearInterval(w.value),clearInterval(Z.value),console.log("离开")}),ke(()=>{i.$api.space_robotGetRobotInfo({type:"SYSTEM_QA_CHAT"}).then(o=>{le.value=o.data.consumeEnergy})});const Ie=()=>{if(g.value=="SD"){let o={code:"1747243596583863333"};i.$api.space_robotGetRobotInfo(o).then(e=>{f.value=e.data,ne()})}if(g.value=="DALL"){let o={type:"DRAW"};i.$api.space_robotGetRobotInfo(o).then(e=>{f.value=e.data}),K.value=!0,i.$api.queryTagTemplateList({type:"DALLE3_DRAW_CATEGORY"}).then(e=>{oe.value=e.data,K.value=!1,oe.value.forEach(u=>{let n=JSON.parse(u.cateLogo);n&&n.IMG_KEY&&(u.img=n.IMG_KEY)})}).catch(()=>{K.value=!1})}Oe()},ne=()=>{let o={type:f.value.type,robotCode:f.value.code};i.$api.ai_bulidChatGroupId(o).then(e=>{j.value=e.data})},Oe=()=>{let o={type:"SCREEN_SIZE"};i.$api.queryTagTemplateList(o).then(e=>{F.value=e.data,F.value.forEach(u=>{u.cateName==q.value&&(Ae.value=u.description.split(";"))})})},ie=(o,e)=>{e=="sDcontent"&&(l.value.content?l.value.content=l.value.content+","+o:l.value.content=o),e=="negativePrompt"&&(l.value.negativePrompt?l.value.negativePrompt=l.value.negativePrompt+","+o:l.value.negativePrompt=o),e=="content"&&(h.value?h.value=h.value+","+o:h.value=o)},Re=o=>{let e=JSON.parse(o.result);g.value=="SD"&&(l.value={content:e&&e.content?e.content:"",negativePrompt:e&&e.negativePrompt?e.negativePrompt:"",sampler:e&&e.sampler?e.sampler:"1747197260320448513",steps:e&&e.steps?e.steps:50,scale:e&&e.scale?e.scale:1,seed:e&&e.seed?e.seed:10,size:"512*1024",num:1},Number(l.value.steps)<10&&(l.value.steps=10),Number(l.value.seed)<0&&(l.value.seed=10),q.value="4:3",F.value.forEach(u=>{u.description.split(";").forEach(D=>{D==l.value.size&&(q.value=u.cateName)})})),g.value=="DALL"&&(h.value=e&&e.content?e.content:"")},ue=i.$debounce(()=>{r.value||(g.value=="DALL"&&we(),g.value=="SD"&&be())},300),be=()=>{if(i.$isEmpty(l.value.content)){i.$Message.error("请输入创意描述");return}if(i.$isEmpty(l.value.size)){i.$Message.error("请选择画面尺寸");return}if(i.$isEmpty(l.value.sampler)){i.$Message.error("请选择采样器");return}{let u={from:"parent page",code:101,name:"AI开始生成背景图片"};v.value.contentWindow.postMessage(u,"*")}let o={content:JSON.stringify(l.value),groupId:j.value,robotCode:f.value.code,chatType:"DRAW"};x.value=[];for(var e=0;e<l.value.num;e++)x.value.push({content:""});k.value=!0,r.value=!0,X.value="",Y.value.pageNo=1,S.setAiChat(i,o,"DrawBatch")},we=()=>{if(i.$isEmpty(h.value)){i.$Message.error("请输入生成内容");return}clearInterval(V.value),i.$api.ai_bulidChatGroupId({type:f.value.type,robotCode:f.value.code}).then(o=>{let e={content:Ce.value+h.value,groupId:o.data,robotCode:f.value.code};k.value=!0,r.value=!0,X.value="",x.value=[],Y.value.pageNo=1,S.setAiChat(i,e)})},De=(o,e)=>{e=="sDcontent"&&(l.value.content=o,E.value=!1),e=="dallContent"&&(h.value=o,U.value=!1)},ye=(o,e,u)=>{J.value=0,ae.value=e.actionType,I.value.width=e.width,I.value.height=e.height,G.value="",u&&(G.value=u),m.value=!0,r.value=!1,window.location.href.indexOf("localhost")!=-1||window.location.href.indexOf("192.168")!=-1||window.location.href.indexOf("test")!=-1?M.value="https://test-poster-v2.dzqnet.com/home":M.value="https://poster-v2.chatdzq.com/home",l.value={content:e.prompt?e.prompt:"一个现代、极简的设计，背景为淡蓝色。设计简洁而优雅，包含了浅粉色和紫色的柔和渐变，搭配浅渐变的天蓝色。设计中有一个光滑的弧形，类似于抽象的波浪或山脉，赋予其深度但不过于复杂。适用于数字媒体，营造出宁静和简约的感觉。设计风格符合极简主义艺术家的风格。",negativePrompt:e.prompt?"":"正常质量,灰度,最差质量,低质量,残缺,裁剪,糟糕的比例,",sampler:"1747197260320448513",steps:50,scale:10,seed:-1,size:"512*1024",num:1},Ie(),Z.value=setInterval(()=>{if(v.value&&v.value.contentWindow){if(G.value){let n={from:"parent page",code:105,name:"图层传参",data:{content:G.value}};setTimeout(()=>{v.value.contentWindow.postMessage(n,"*")},1e3)}clearInterval(Z.value)}},100),window.addEventListener("message",function(n){var D;if(console.log(n),n&&n.data&&JSON.parse(n.data).code==402){let O=(D=Qe("authtoken"))==null?void 0:D.value,N={from:"parent page",code:103,name:"开始加载",data:{content:JSON.stringify(O)}};v.value.contentWindow.postMessage(N,"*"),console.log(v.value.contentWindow),setTimeout(()=>{re(o)},1e3)}if(n&&n.data&&JSON.parse(n.data).code==104&&ae.value!="try"){let O=JSON.parse(e.extent);e.height=JSON.parse(JSON.parse(n.data).content).page.height,e.width=JSON.parse(JSON.parse(n.data).content).page.width,O.size=e.width+"*"+e.height,O.layer=JSON.parse(n.data).content;let N={groupId:e.groupId,content:JSON.parse(n.data).cover,extent:JSON.stringify(O),partyRelationshipId:e.partyRelationshipId,partyRelationshipType:e.partyRelationshipType};xe(N)}n&&n.data&&JSON.parse(n.data).code==106&&(r.value=!1,m.value=!1)})},xe=i.$debounce(o=>{J.value>0||(r.value=!0,i.$api.editAiRecordGroup(o).then(()=>{i.$Message.success("已保存"),r.value=!1,m.value=!1,J.value=J.value+1,H("saveClose")}).catch(()=>{r.value=!1}))},300),re=o=>{if(clearInterval(w.value),I.value.width){let e={from:"parent page",code:100,name:"AI生成完成背景图片",data:{content:o,width:I.value.width,height:I.value.height}};w.value=setInterval(()=>{v.value&&(v.value.contentWindow.postMessage(e,"*"),clearInterval(w.value))},100),setTimeout(()=>{se.value=""},500)}else{let e={from:"parent page",code:100,name:"AI生成完成背景图片",data:{content:o}};w.value=setInterval(()=>{console.log(v.value),v.value&&(v.value.contentWindow.postMessage(e,"*"),clearInterval(w.value))},100),setTimeout(()=>{se.value=""},500)}};return ge({showFn:ye}),L(()=>S.getChatMsg,o=>{if(o.type=="ERROR"&&(r.value=!1,k.value=!1,clearInterval(V.value)),m.value&&o.type=="DRAW"){if(E.value||U.value)return;o.type=="ERROR"&&(r.value=!1,k.value=!1,clearInterval(V.value)),o&&o.content&&(i.$Message.success("已生成"),g.value=="SD"?(x.value.push({content:o.content}),I.value.width="",I.value.height="",r.value=!1,re(o.content)):(X.value=o.content,x.value=[{content:o.content}]))}},{deep:!0}),L(()=>S.electric,()=>{E.value||U.value||(r.value=!1,Se.value=[],Y.value.pageNo=1,ne())},{deep:!0}),L(()=>S.isAccident,()=>{S.isAccident&&(r.value=!1)},{deep:!0}),L(()=>m.value,()=>{m.value||H("close")}),(o,e)=>{const u=P("Poptip"),n=Te,D=P("Spin"),O=We,N=P("Modal");return A(),Ge(n,null,{default:d(()=>[c(N,{modelValue:m.value,"onUpdate:modelValue":e[18]||(e[18]=s=>m.value=s),"class-name":"picEdit","mask-closable":!1,closable:!1,width:"100%","footer-hide":!0},{default:d(()=>[a("div",He,[a("div",je,[a("div",$e,[a("img",{onClick:e[0]||(e[0]=s=>m.value=!1),src:Ue})]),a("div",et,[(A(!0),C(Q,null,Ke(he.value,(s,ce)=>(A(),C("div",{class:"list-item",key:ce},[a("div",tt,R(ce+1),1),a("div",at,R(s.content),1)]))),128))])]),a("div",ot,[a("div",lt,[a("div",st,[g.value=="SD"?(A(),C(Q,{key:0},[a("div",nt,[it,a("div",{class:"fr pointer green",onClick:e[1]||(e[1]=s=>te.value.showFn())},"Prompt模版")]),a("div",ut,[a("div",rt,[ve(a("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.content=s),maxLength:800,placeholder:"请输入自定义内容，尽可能用多个提示词描述。如：男孩，金发（注：需要用逗号隔开）"},null,512),[[de,l.value.content]]),a("div",ct,[a("div",vt,[c(n,null,{default:d(()=>[c(u,{placement:"right-start",trigger:"click",transfer:!0,modelValue:E.value,"onUpdate:modelValue":e[6]||(e[6]=s=>E.value=s),onOnPopperHide:e[7]||(e[7]=s=>z.value.toBreak())},{content:d(()=>[c(qe,{ref_key:"associateRef1",ref:z,onClose:e[4]||(e[4]=s=>E.value=!1),onGetLink:e[5]||(e[5]=s=>De(s,"sDcontent"))},null,512)]),default:d(()=>[a("div",{class:"left-item",onClick:e[3]||(e[3]=s=>z.value.showFn(l.value.content,E.value))},[dt,pt,a("div",mt,[ft,a("div",null,R(le.value)+"电量",1)])])]),_:1},8,["modelValue"])]),_:1}),c(n,null,{default:d(()=>[c(u,{placement:"right-start",transfer:!0,trigger:"click",modelValue:B.value,"onUpdate:modelValue":e[10]||(e[10]=s=>B.value=s)},{content:d(()=>[c(pe,{ref_key:"lexiconRef1",ref:$,onClose:e[9]||(e[9]=s=>B.value=!1),onGetTageName:ie},null,512)]),default:d(()=>[a("div",{class:"left-item",onClick:e[8]||(e[8]=s=>$.value.showFn("NEW_WORD_CATEGORY","sDcontent"))},ht)]),_:1},8,["modelValue"])]),_:1})]),a("div",Ct,[a("div",null,R(l.value.content.length)+"/800",1),St,a("img",{onClick:e[11]||(e[11]=s=>l.value.content=""),src:me})])])])]),Et,a("div",It,[a("div",Ot,[ve(a("textarea",{"onUpdate:modelValue":e[12]||(e[12]=s=>l.value.negativePrompt=s),maxLength:800,placeholder:"请输入不希望呈现的内容描述"},null,512),[[de,l.value.negativePrompt]]),a("div",Rt,[a("div",bt,[c(n,null,{default:d(()=>[c(u,{trigger:"click",transfer:!0,modelValue:W.value,"onUpdate:modelValue":e[15]||(e[15]=s=>W.value=s)},{content:d(()=>[c(pe,{ref_key:"lexiconRef2",ref:ee,onClose:e[14]||(e[14]=s=>W.value=!1),onGetTageName:ie},null,512)]),default:d(()=>[a("div",{class:"left-item",onClick:e[13]||(e[13]=s=>ee.value.showFn("PASSIVE_WORD_CATEGORY","negativePrompt"))},yt)]),_:1},8,["modelValue"])]),_:1})]),a("div",xt,[a("div",null,R(l.value.negativePrompt.length)+"/800",1),Nt,a("img",{onClick:e[16]||(e[16]=s=>l.value.negativePrompt=""),src:me})])])])])],64)):T("",!0)])]),a("div",_t,[a("div",Jt,[Mt,b(" 消耗 "),g.value=="SD"?(A(),C(Q,{key:0},[b(R(l.value.num*f.value.consumeEnergy),1)],64)):(A(),C(Q,{key:1},[b(R(f.value.consumeEnergy),1)],64)),b(" 电量 ")]),a("span",{class:"but",onClick:e[17]||(e[17]=(...s)=>y(ue)&&y(ue)(...s))},[c(D,{fix:"",show:r.value},{default:d(()=>[b("生成中...")]),_:1},8,["show"]),r.value?T("",!0):(A(),C("div",kt,"AI生成背景图"))]),a("p",null,[b("请遵守"),a("a",{href:y(S).configuration.userServiceLink},"《用户服务协议》",8,Gt),b("，AI结果由各大模型输出，其内容仅供参考，不代表我们的观点和态度")])]),a("div",{innerHTML:Ee.value,id:"vhtml",class:"vhtml"},null,8,Lt),a("div",Qt,[r.value?(A(),C("div",Tt,[c(O,{svgaImg:y(Ye),ref:"svga",width:200,height:284},null,8,["svgaImg"])])):T("",!0),y(M)&&m.value?(A(),C("iframe",{key:1,ref_key:"fIframe",ref:v,class:"iframeClass",frameborder:"no",scrolling:"no",src:y(M)},null,8,Kt)):T("",!0)]),c(Ze,{ref_key:"promptRef",ref:te,onClose:Re},null,512)])])]),_:1},8,["modelValue"])]),_:1})}}});const jt=Be(Vt,[["__scopeId","data-v-dc5d655a"]]);export{jt as default};
