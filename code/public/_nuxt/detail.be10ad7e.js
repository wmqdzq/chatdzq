import{a as Je,e as Ve,b as We,r as l,N as Xe,o,c as V,k as S,y as a,u as f,l as u,K as _t,m as je,S as ft,f as gt,w as ve,h as J,i as n,j as C,A as E,x as c,F as x,s as ee,U as yt,V as kt,v as te,B as Fe,z as me,_ as Ct,C as Et,D as St,E as Me,G as At}from"./entry.d811778a.js";import{_ as Rt}from"./previewImg.3bbe8181.js";import{_ as bt}from"./ossUploaderNew.392fe014.js";import{_ as $t}from"./clock.eb44b857.js";import{_ as It}from"./icon14.d8f5d4e2.js";import{_ as Tt}from"./delete.93bc223f.js";import{_ as Ke}from"./bottom-arrow.2b2a94f1.js";import{_ as Lt,a as Nt,b as Dt}from"./search.8bd5ea07.js";import{i as Be,a as He,b as Pe,c as Ge,_ as Ot,d as xt,e as wt,f as Ut,g as Ft,h as Mt,j as Bt,k as Ht,l as Pt,m as Gt}from"./icon12.6e5e51b3.js";import{h as ze,c as qe}from"./content.8ac9cfa6.js";import{_ as zt}from"./svga.1e6ae788.js";import{l as qt}from"./loadImg.56ed4b6f.js";import{T as Jt,M as Ae}from"./index.b87a4887.js";import"./_commonjsHelpers.86de73f2.js";import"./_commonjs-dynamic-modules.302442b1.js";import"./upload.51048db5.js";import"./loding.bf55ea5c.js";import"./stringify.f484c508.js";import"./transform.b1da36c5.js";const Vt=""+new URL("add.6ff9590b.svg",import.meta.url).href,Wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAhlJREFUWEftmLFrFEEUxr9vMWsUBf+EFBYGLBS0sxEVlATkCiE5FCYnd0kr2Fik0sJCMKVu4DLVruWBkQhGsE+hXVJYWlgKHnhJuHkyF01Abndv93Z0kZ1238z85vtm35sZouSNJedDBTiuQ5WCThWcV61zAJ6RuAZgctzJBv2JLoBNMXgU6WAnbcxYiy0cPWxBcCptkFzfia4YXE6DjAWsLzQ7AG/nmnzETiJ4E+lgNik8HrDR+n6knixDsD7ivMlhxCzAx7+CeuFacCIf4EJLDjuKXAz16qciAOuqeQHkx99jhWtBYiZJsLgCHIhYqIJKqck9+q8Bns1mt3z25eQdrVe+ObW43mheh/BdNriDaBHeivTLt04BrYK79FcI2AQ+eiO3fbP7QGvdcwo4OlF8ZAU4p5amjgFTwzTqw3xNK11OFbx3f+l835itpIODEe/qK/3iQ5zJTgHnGouXPBELGNtEUIt00PkngHbS+UbrCo03PA96/S9he3UzaQFOFaz+4iEKZDos2ES97x1/LiLTWdQkuT3xNxL1XbV401A2ssAdxlJu2P3pdA8qpc7se34kwkyljpSdCbNXq0pdLmv/6OTU4rIB/jgqaVyGmEIuTSRnBHgyWCzRDdvB6aSFJ92L10nMFKFa7BhEJ2wHtbyA5b64D+qufV2gPAVonz6KemHoieA9gIdpR7ODXVDyVgGOa1Cl4H+v4E+WC3w4fE+6gQAAAABJRU5ErkJggg==",Xt=""+new URL("depth.97bb0f9f.svg",import.meta.url).href,jt=""+new URL("study.29e40816.svg",import.meta.url).href,Kt={class:"pptMains-content",id:"content"},Qt=Je({__name:"index",emits:["toClose"],setup(ae,{expose:Re,emit:d}){Ve();const w=We(),{proxy:I}=je(),A=l(!1),U=l(!1),P=l(!1),m=l(null),G=l(),he=l([1004,1005,1006,1007]),F=(T,z)=>{A.value=!0,P.value=!0,clearInterval(m.value),U.value=!0,I.$api.getGenerateAiPptCode().then(W=>{let y=document.createElement("script");y.type="text/javascript",y.src="https://aippt-domestic.aippt.com/static/js/aippt-iframe-sdk.js",document.body.appendChild(y),m.value=setInterval(()=>{AipptIframe&&(U.value=!1,_e(W),clearInterval(m.value))},100)}).catch(()=>{U.value=!1})},_e=T=>{if(P.value){let z=document.getElementById("content");U.value=!1,AipptIframe.show({appkey:T.data.apiKey,channel:T.data.channel?T.data.channel:"DZQ",code:T.data.aiPptCode,editorModel:!0,container:z,options:{fc_plate:[2002,2010]},onMessage(W,y){if(W==="SCENE_AUTH")if(y.scene==1002)AipptIframe.sceneAuthContinue(!1);else if(sceneList.value.indexOf(y.scene)!=-1){if(G.value="",y.scene==1001&&I.$isEmpty(y.title))return;I.$api.deductRobotElectricity({type:"PPT_ROBOT"}).then(()=>{AipptIframe.sceneAuthContinue(!0),w.getUserPoints(I)}).catch(()=>{AipptIframe.sceneAuthContinue(!1)})}else he.value.indexOf(y.scene)!=-1&&(G.value=y.scene),AipptIframe.sceneAuthContinue(!0);else I.$isEmpty(G.value)||(G.value="",I.$api.deductRobotElectricity({type:"PPT_ROBOT"}).then(()=>{AipptIframe.sceneAuthContinue(!0),w.getUserPoints(I)}).catch(()=>{AipptIframe.sceneAuthContinue(!1)}))}})}};return Re({showFn:F}),Xe(()=>{clearInterval(m.value),P.value=!1}),(T,z)=>{const W=zt,y=_t;return o(),V(y,{modelValue:A.value,"onUpdate:modelValue":z[0]||(z[0]=M=>A.value=M),title:"生成PPT",className:"pptMains",fullscreen:!0,"footer-hide":!1,"mask-closable":!1},{default:S(()=>[a("div",Kt,[U.value?(o(),V(W,{key:0,svgaImg:f(qt),width:200,height:284},null,8,["svgaImg"])):u("",!0)])]),_:1},8,["modelValue"])}}});const g=ae=>(Et("data-v-d05fa6fd"),ae=ae(),St(),ae),Zt={class:"pageContent"},Yt={class:"chatAreaNav clearfix"},ea={key:0,class:"chatOperation"},ta={class:"chatOperation-tag"},aa={key:1,class:"chatGroupList"},sa={class:"area"},oa={class:"add"},na=["onClick"],la={class:"content"},ia={class:"content-title text-hide"},ca={class:"content-name"},ua=["onClick"],ra={class:"aiSearchDetail"},da={class:"aiSearchDetail-top"},pa={class:"top-left"},va=g(()=>a("img",{src:Ke},null,-1)),ma={class:"searchArea"},ha={class:"searchArea-title"},_a=["onClick"],fa={class:"radius-left"},ga={key:0,class:"greenPoint"},ya={key:1,class:"bluePoint"},ka={key:2,class:"purplePoint"},Ca=g(()=>a("img",{class:"confirm",src:Dt},null,-1)),Ea={class:"searchArea-title",style:{"margin-bottom":"8px"}},Sa={class:"radius-content"},Aa={class:"radius-content"},Ra=g(()=>a("div",{class:"top-left"},[a("div",{class:"division"})],-1)),ba={class:"top-content"},$a={key:0,src:Lt},Ia={key:1,src:Nt},Ta={class:"aiSearchDetail-content"},La={class:"left-h2"},Na=g(()=>a("div",{class:"answer"},[a("img",{src:Bt}),a("div",null,"回答")],-1)),Da={key:0,class:"loading text-hide"},Oa=g(()=>a("div",{class:"spinnerCom fl mr-10"},null,-1)),xa={class:"detailContent"},wa={class:"list"},Ua={key:0,class:"item"},Fa={key:0,class:"extend"},Ma=g(()=>a("img",{src:Ke},null,-1)),Ba={key:0,class:"extend-content"},Ha={class:"content-item"},Pa=["title"],Ga=["href"],za={key:1,class:"item"},qa={class:"inquiry-title"},Ja={class:"inquiry-title-left"},Va=g(()=>a("img",{src:Ht},null,-1)),Wa=g(()=>a("img",{src:Wt},null,-1)),Xa=g(()=>a("img",{src:Xt},null,-1)),ja=g(()=>a("img",{src:jt},null,-1)),Ka={class:"inquiry-title-right"},Qa=g(()=>a("img",{style:{"margin-left":"8px"},src:Gt},null,-1)),Za={key:0,class:"popperClass2-item"},Ya=g(()=>a("div",{class:"spinnerCom fl mr-10"},null,-1)),es={class:"inquiry-input"},ts=["onClick"],as={class:"title"},ss=["src"],os={key:0},ns={class:"fr"},ls=g(()=>a("em",{class:"right-arrow"},null,-1)),is={key:0,class:"content"},cs={key:1,class:"references"},us=["href"],rs={key:0,class:"right"},ds={class:"area"},ps={class:"title"},vs={key:0,src:wt},ms={key:1,src:Ut},hs={key:0,src:Ft},_s={key:1,src:Mt},fs={key:0,style:{width:"calc(100% - 32px)","margin-left":"16px"}},gs=g(()=>a("div",{class:"spinnerCom fl mr-10"},null,-1)),ys={class:"content-text"},ks={class:"markmap-content"},Cs={key:0,id:"markmap",width:"100%",height:"100%",class:"w-screen h-screen leading-none markmap mm-dwm9rn-1"},Es={class:"markmap-action"},Ss={key:0,class:"spinnerCom"},As=g(()=>a("div",null,null,-1)),Rs={class:"ppt-content"},bs=g(()=>a("img",{src:Pt},null,-1)),$s=g(()=>a("div",null,null,-1)),Is={key:0,class:"maxBrain"},Ts=g(()=>a("div",{class:"markmap-content",id:"searchCanvas"},[a("svg",{id:"markmap2",width:"100%",height:"100%",class:"w-screen h-screen leading-none markmap mm-dwm9rn-1"})],-1)),Ls=[Ts],Ns=Je({__name:"detail",setup(ae){const{locale:Re,t:d}=ft(),w=l(!1),I=l(),A=l(!1),U=l(),P=new Jt,m=l(""),G=l(null),{Modal:he}=Me,F=l(!1),_e=l(null);l(!1);const T=l(!1),{Table:z,Spin:W}=Me,y=l(!1),M=l(""),{proxy:r}=je(),p=We(),L=Ve(),X=l(!1),ne=l(!1),le=l(),N=l(1);l(!1);const se=l(""),j=l(!0),K=l(""),B=l([]);l(!1);const ie=l(!1),oe=l(!1);P.transform(m.value);const ce=l(!1),fe=l(""),k=l([{name:d("aiSearch.相关事件"),key:"RELATED_EVENTS",icon:Be,iconActive:"icon75_1",content:"",columns:[{title:d("aiSearch.事件名称"),key:"eventTitle"},{title:d("aiSearch.事件概述"),key:"eventDescribe"}],status:!1},{name:d("aiSearch.相关组织"),key:"ORGANIZE",icon:He,iconActive:"icon76_1",content:"",columns:[{title:d("aiSearch.组织名称"),key:"organizeName"},{title:d("aiSearch.概述"),key:"organizeDescribe"}],status:!1},{name:d("aiSearch.相关人物"),key:"CHARACTER",icon:Pe,iconActive:"icon77_1",content:"",columns:[{title:d("aiSearch.人物名称"),key:"characterName"},{title:d("aiSearch.概述"),key:"characterDescribe"}],status:!1},{name:d("aiSearch.参考文献"),key:"REFERENCES",icon:Ge,iconActive:"icon78_1",content:"",status:!1}]),i=l({content:"",searchDepth:"CONCISE",searchScope:"WHOLE_NETWORK",learningScope:"",outputLanguage:"CN",extendedReadingFlag:!0}),be=l([{value:d("aiSearch.全网"),key:"WHOLE_NETWORK"},{value:d("aiSearch.学术"),key:"LEARNING"},{value:d("aiSearch.播客"),key:"XIMALAYA"}]),Qe=l([{value:"中文",key:"CN"},{value:"English",key:"EN"}]),ue=l(d("aiSearch.资料搜索中")+"..."),ge=l(0),R=l({}),b=l(""),re=l(!1);let ye,Q;gt(()=>{Ze(),window.addEventListener("resize",$e)}),Xe(()=>{window.removeEventListener("resize",$e)});const $e=()=>{ce.value=!1},Ze=()=>{re.value=!0,Ye()},Ye=()=>{let t={type:"AI_SEARCH"};r.$api.space_robotGetRobotInfo(t).then(e=>{R.value=e.data,L.currentRoute.value.query&&L.currentRoute.value.query.groupId?(p.abortReadingStream(),q.value.pageNo=1,b.value=L.currentRoute.value.query.groupId,q.value.loadMore=!0,we()):at()})},Ie=r.$debounce(t=>{oe.value||(fe.value=t,oe.value=!0,A.value=!1,setTimeout(()=>{A.value=!0,setTimeout(()=>{Q=Ae.create("#markmap2"),setTimeout(()=>{const{root:e,features:v}=P.transform(m.value);Q.setData(e),Q.fit(),setTimeout(()=>{let h=document.getElementById("searchCanvas");ze(h,{scale:4,width:h.offsetWidth,height:h.offsetHeight,useCORS:!0}).then(_=>{let $=document.body.appendChild(_);$.style.display="none",document.body.removeChild($);let D=Le($.toDataURL("image/png"));URL.createObjectURL(D);let O={target:{files:[new File([D],"test",{type:"text/plain",lastModified:Date.now()})]}};I.value.uploadFile(O)})},800)},50)},100)},200))},300),et=t=>{let e={code:K.value,exportType:fe.value,imgCode:t[0].code};r.$api.getAiSearchRecordConvertFile(e).then(v=>{tt(v.data.url).then(h=>{const _=document.createElement("a");_.href=window.URL.createObjectURL(h),fe.value=="DOCX"?_.download=d("public.下载")+".docx":_.download=d("public.下载")+".pdf",document.body.appendChild(_),_.click(),document.body.removeChild(_),oe.value=!1})}).catch(()=>{oe.value=!1})},tt=t=>new Promise(e=>{const v=new XMLHttpRequest;v.open("GET",t,!0),v.responseType="blob",v.onload=()=>{v.status===200&&e(v.response)},v.send()}),at=()=>{p.abortReadingStream();let t={type:R.value.type,robotCode:R.value.code};r.$api.ai_bulidChatGroupId(t).then(e=>{b.value=e.data,L.replace({path:L.currentRoute.value.path,query:{groupId:b.value}}),r.$isEmpty(p.pagesData)||(i.value.content=p.pagesData.content,i.value.searchDepth=p.pagesData.searchDepth,i.value.searchScope=p.pagesData.searchScope,i.value.learningScope=p.pagesData.learningScope,i.value.outputLanguage=p.pagesData.outputLanguage,i.value.extendedReadingFlag=p.pagesData.extendedReadingFlag,p.setPagesData({}),ke())})},Te=r.$debounce(t=>{ie.value=!0;let e=document.getElementById("searchCanvas");ze(e,{scale:8,width:e.offsetWidth,height:e.offsetHeight,useCORS:!0}).then(v=>{let h=document.body.appendChild(v);h.style.display="none",document.body.removeChild(h);let _=Le(h.toDataURL("image/png"));const $=URL.createObjectURL(_);if(t==1&&(U.value.showFn($),ie.value=!1),t==2){const D=new XMLHttpRequest;D.open("GET",$,!0),D.responseType="blob",D.onload=function(){const pe=window.URL.createObjectURL(D.response),O=document.createElement("a");O.href=pe,O.target="_blank",O.download="脑图",O.click(),O.remove(),r.$Message.success(d("publicMsg.已下载")),ie.value=!1},D.send()}})},300),Le=t=>{for(var e=t.split(","),v=e[0].match(/:(.*?);/)[1],h=atob(e[1]),_=h.length,$=new Uint8Array(_);_--;)$[_]=h.charCodeAt(_);return new Blob([$],{type:v})},st=()=>{p.abortReadingStream(),k.value=[{name:"相关事件",key:"RELATED_EVENTS",icon:Be,iconActive:"icon75_1",content:"",columns:[{title:"事件名称",key:"eventTitle"},{title:"事件概述",key:"eventDescribe"}],status:!1},{name:"相关组织",key:"ORGANIZE",icon:He,iconActive:"icon76_1",content:"",columns:[{title:"组织名称",key:"organizeName"},{title:"概述",key:"organizeDescribe"}],status:!1},{name:"相关人物",key:"CHARACTER",icon:Pe,iconActive:"icon77_1",content:"",columns:[{title:"人物名称",key:"characterName"},{title:"概述",key:"characterDescribe"}],status:!1},{name:"参考文献",key:"REFERENCES",icon:Ge,iconActive:"icon78_1",content:"",status:!1}],m.value="",M.value=""},Ne=r.$debounce(()=>{r.$CopyTex(m.value,"PPT大纲已复制"),G.value.showFn()},300),ot=()=>{B.value=[],st(),ke()},ke=()=>{p.abortReadingStream();let t={content:i.value.content,groupId:b.value,robotCode:R.value.code,type:"AI_SEARCH",searchDepth:i.value.searchDepth,searchScope:i.value.searchScope,learningScope:i.value.learningScope,outputLanguage:i.value.outputLanguage,extendedReadingFlag:i.value.extendedReadingFlag,openChatContext:!1};M.value="",p.setAiChat(r,t)},Ce=r.$debounce(t=>{i.value.searchDepth=t,m.value="",k.value[0].content="",k.value[1].content="",k.value[2].content="",k.value[3].content="",B.value=[],N.value=1,A.value=!1,ke()},300),nt=()=>{{let t=window.location.origin+"/share/search/"+K.value;r.$CopyTex(t)}},De=r.$debounce(()=>{if(r.$isEmpty(se.value)){r.$Message.error(d("publicMsg.请输入"));return}p.abortReadingStream(),m.value="",k.value[0].content="",k.value[1].content="",k.value[2].content="",k.value[3].content="",B.value=[],F.value=!1,N.value=1,A.value=!1;let t={type:R.value.type,robotCode:R.value.code};r.$api.ai_bulidChatGroupId(t).then(e=>{b.value=e.data;let v={content:se.value,groupId:b.value,robotCode:R.value.code,type:"AI_SEARCH",searchDepth:i.value.searchDepth,searchScope:i.value.searchScope,learningScope:i.value.learningScope,outputLanguage:i.value.outputLanguage,extendedReadingFlag:i.value.extendedReadingFlag,openChatContext:!0};M.value="",p.setAiChat(r,v),i.value.content=se.value})},300),lt=()=>{X.value=!0,Se()},Oe=r.$debounce(t=>{const{scrollTop:e,scrollHeight:v,clientHeight:h}=t.target;v-e-h<10&&(de.value=de.value+1,Se())},300),it=()=>{ce.value=!1},ct=l([]),Z=l([]),xe=l(!0),de=l(1),q=l({loadMore:!0,pageNo:1,pageSize:100}),Ee=l(!1),Se=()=>{if(r.$isLogin()){let t={robotCode:R.value.code,type:R.value.type,pageNo:de.value,pageSize:20};xe.value&&!r.$isEmpty(R.value.code)&&r.$api.queryAiRecordGroupPageList(t).then(e=>{let v=e.data;if(de.value>1?Z.value=Z.value.concat(v):Z.value=v,e.data&&e.data.length==0){xe.value=!1;return}})}},ut=(t,e)=>{p.abortReadingStream(),q.value.pageNo=1,b.value=t,_e.value=e,ct.value=[],q.value.loadMore=!0,L.replace({path:L.currentRoute.value.path,query:{groupId:b.value}}),N.value=1,A.value=!1,m.value="",we()},we=()=>{let t={robotCode:R.value.code,groupId:b.value,pageNo:q.value.pageNo,pageSize:q.value.pageSize};q.value.loadMore&&r.$api.queryNewAiRecordPageList(t).then(e=>{K.value="",r.$isEmpty(e.data[0])||(i.value.content=e.data[0].request,M.value=e.data[0].content,r.$isEmpty(e.data[0].extent)||(m.value=JSON.parse(e.data[0].extent).OUTLINE,k.value[0].content=JSON.parse(e.data[0].extent).EVENT,k.value[1].content=JSON.parse(e.data[0].extent).ORGANIZE,k.value[2].content=JSON.parse(e.data[0].extent).CHARACTER,k.value[3].content=JSON.parse(e.data[0].extent).REFERENCES,B.value=JSON.parse(e.data[0].extent).EXTENDED_READING,i.value.searchDepth=JSON.parse(e.data[0].extent).SEARCH_DEPTH),ne.value=!0,K.value=e.data[0].recordCode,r.$isEmpty(m.value)?j.value=!1:j.value=!0)})},Ue=t=>{w.value||(N.value=t,A.value=!1,t==2&&(A.value=!1,y.value=!1,setTimeout(()=>{A.value=!0,y.value=!0,setTimeout(()=>{ye=Ae.create("#markmap"),Q=Ae.create("#markmap2"),setTimeout(()=>{rt()},50)},100)},100)))},rt=()=>{const{root:t,features:e}=P.transform(m.value);ye.setData(t),ye.fit(),Q.setData(t),Q.fit()},dt=t=>{he.confirm({okText:d("i.poptip.okText"),cancelText:d("i.poptip.cancelText"),content:delMsg.value||d("aiChat.是否删除该数据"),onOk:()=>{let e={codeList:[t.code]};Ee.value=!0,r.$api.deleteBatchAiRecordGroup(e).then(()=>{if(Ee.value=!1,r.$Message.success(d("publicMsg.已删除")),Z.value.length==1||b.value==t.groupId){Z.value=[],L.go(-1);return}Se()}).catch(()=>{Ee.value=!1})}})};return ve(()=>X.value,()=>{p.setIsShowHis(X.value)},{immediate:!0}),ve(()=>p.isLoad,t=>{p.isLoad?ne.value=!1:ne.value=!0}),ve(()=>p.electric,()=>{re.value&&p.isLoad||(r.$isEmpty(m.value)&&(j.value=!1),w.value=!1)},{deep:!0}),ve(()=>p.getChatMsg,t=>{if(w.value=!0,t.content=="[ONCOMPLETED]"){re.value=!1,r.$isEmpty(m.value)&&(j.value=!1);return}if((t.type=="WAIT"||t.type=="MESSAGE"||t.type=="URL")&&(ue.value=t.content),t.type=="AI_SEARCH_WAIT"){ge.value++,ge.value==1&&(ue.value="总结中..."),ge.value==2&&(ue.value="相关数据生成中...");return}t&&t.content&&(t.type=="CHAT"?(M.value+=t.content,K.value=t.code):t.type=="OUTLINE"?m.value+=t.content:t.type=="EXTENDED_READING"?B.value.push(JSON.parse(t.content)):k.value=k.value.map(e=>e.key===t.type||e.key==="RELATED_EVENTS"&&e.key==="ORGANIZE"&&e.key==="CHARACTER"&&e.key==="REFERENCES"&&e.key==="OUTLINE"?{...e,content:e.key==="OUTLINE"?e.content+=t.content:t.content}:e))},{deep:!0}),(t,e)=>{const v=J("Tooltip"),h=Ct,_=J("Button"),$=J("Switch"),D=J("Option"),pe=J("Select"),O=J("Poptip"),pt=J("Input"),vt=Rt,mt=bt;return o(),n("div",Zt,[a("div",Yt,[X.value?u("",!0):(o(),n("div",ea,[C(h,null,{default:S(()=>[C(v,{content:t.$t("aiSearch.新搜索任务"),placement:"right"},{default:S(()=>[a("div",ta,[a("img",{onClick:e[0]||(e[0]=s=>f(L).go(-1)),src:Vt,alt:""})])]),_:1},8,["content"]),C(v,{content:t.$t("public.历史记录"),placement:"right"},{default:S(()=>[a("div",{class:"chatOperation-tag"},[a("img",{onClick:lt,src:$t,alt:""})])]),_:1},8,["content"])]),_:1})])),X.value?(o(),n("div",aa,[a("div",sa,[a("h2",null,[E(c(t.$t("public.历史记录"))+" ",1),a("img",{style:{cursor:"pointer"},onClick:e[1]||(e[1]=s=>X.value=!1),src:It,alt:""})]),a("div",oa,[C(_,{type:"primary",size:"large",onClick:e[2]||(e[2]=s=>f(L).push("/ai/search"))},{default:S(()=>[E("+ "+c(t.$t("public.新建搜索")),1)]),_:1})])]),a("div",{class:"info-left-list",onScroll:e[3]||(e[3]=(...s)=>f(Oe)&&f(Oe)(...s))},[(o(!0),n(x,null,ee(Z.value,(s,H)=>(o(),n("div",{class:te(["list-item pointer",b.value==s.groupId?"active":""]),key:H,onClick:Y=>ut(s.groupId,H)},[a("div",la,[a("div",ia,c(s.request),1),a("div",ca,c(s.gmtCreate),1)]),a("img",{class:"deleteIco",onClick:me(Y=>dt(s),["stop"]),src:Tt},null,8,ua)],10,na))),128))],32)])):u("",!0)]),a("div",ra,[a("div",da,[C(h,null,{default:S(()=>[C(O,{placement:"bottom","popper-class":"popperClass"},{content:S(()=>[a("div",ma,[a("div",ha,c(t.$t("aiSearch.搜索范围")),1),(o(!0),n(x,null,ee(be.value,(s,H)=>(o(),n("div",{class:te(["searchArea-radius",i.value.searchScope==s.key?"active":""]),key:H},[a("div",{class:"searchArea-radius-content",onClick:Y=>i.value.searchScope=s.key},[a("div",fa,[s.key=="WHOLE_NETWORK"?(o(),n("div",ga)):u("",!0),s.key=="LEARNING"?(o(),n("div",ya)):u("",!0),s.key=="XIMALAYA"?(o(),n("div",ka)):u("",!0),a("div",null,c(s.value),1)]),Ca],8,_a)],2))),128)),a("div",Ea,c(t.$t("aiSearch.高级设置")),1),a("div",Sa,[a("div",null,c(t.$t("aiSearch.延伸阅读")),1),C($,{modelValue:i.value.extendedReadingFlag,"onUpdate:modelValue":e[4]||(e[4]=s=>i.value.extendedReadingFlag=s)},null,8,["modelValue"])]),a("div",Aa,[a("div",null,c(t.$t("aiSearch.输出语言")),1),C(pe,{size:"small",class:"select",modelValue:i.value.outputLanguage,"onUpdate:modelValue":e[5]||(e[5]=s=>i.value.outputLanguage=s)},{default:S(()=>[(o(!0),n(x,null,ee(Qe.value,(s,H)=>(o(),V(D,{key:H,value:s.key},{default:S(()=>[E(c(s.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])]),default:S(()=>[a("div",pa,[a("div",null,c(t.$filterStatus(i.value.searchScope,be.value)),1),va])]),_:1})]),_:1}),Ra,a("div",ba,[yt(a("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>i.value.content=s),maxLength:18e3,onFocus:e[7]||(e[7]=s=>le.value=!0),onBlur:e[8]||(e[8]=s=>le.value=!1),placeholder:"请输入"},null,544),[[kt,i.value.content]])]),a("div",{class:te(["top-search",le.value?"isFocus":""]),onClick:ot},[le.value?(o(),n("img",Ia)):(o(),n("img",$a))],2)]),a("div",Ta,[a("div",{class:"left",onScroll:it},[a("h2",La,c(i.value.content),1),Na,re.value&&f(p).isLoad?(o(),n("div",Da,[Oa,E(" "+c(ue.value),1)])):u("",!0),a("div",xa,[C(qe,{content:M.value},null,8,["content"])]),a("div",wa,[a("ul",null,[i.value.extendedReadingFlag&&ne.value&&!w.value?(o(),n("li",Ua,[B.value&&B.value.length>0?(o(),n("div",Fa,[a("div",{class:"extend-top",onClick:e[9]||(e[9]=s=>T.value=!T.value)},[a("div",null,c(t.$t("aiSearch.延伸阅读")),1),Ma]),T.value?(o(),n("div",Ba,[(o(!0),n(x,null,ee(B.value,s=>(o(),n("div",Ha,[a("div",{class:"snippet text-hide-2",title:s.snippet},c(s.snippet),9,Pa),!t.$isEmpty(s.title)&&!t.$isEmpty(s.seeMoreUrl)?(o(),n("a",{key:0,target:"_blank",class:"text-hide",href:s.seeMoreUrl},[a("span",null,c(s.title),1)],8,Ga)):u("",!0)]))),256))])):u("",!0)])):u("",!0)])):u("",!0),!t.$isEmpty(K.value)&&!w.value?(o(),n("li",za,[a("div",{class:"inquiry",style:Fe({height:F.value?"150px":"auto"})},[a("div",qa,[a("div",Ja,[a("div",{class:"left-action",onClick:nt},[Va,E(" "+c(t.$t("public.分享")),1)]),i.value.searchDepth!="CONCISE"?(o(),n("div",{key:0,class:"left-action",onClick:e[10]||(e[10]=s=>f(Ce)("CONCISE"))},[Wa,E(" "+c(t.$t("aiSearch.简洁")),1)])):u("",!0),i.value.searchDepth!="THOROUGH"?(o(),n("div",{key:1,class:"left-action",onClick:e[11]||(e[11]=s=>f(Ce)("THOROUGH"))},[Xa,E(" "+c(t.$t("aiSearch.深度研究")),1)])):u("",!0),i.value.searchDepth!="RESEARCH"?(o(),n("div",{key:2,class:"left-action",onClick:e[12]||(e[12]=s=>f(Ce)("RESEARCH"))},[ja,E(" "+c(t.$t("aiSearch.学术研究")),1)])):u("",!0)]),a("div",Ka,[a("div",{style:{"padding-bottom":"4px"},onClick:e[13]||(e[13]=s=>F.value=!F.value)},c(t.$t("aiSearch.追问")),1),C(h,null,{default:S(()=>[j.value?(o(),V(O,{key:0,placement:"bottom",modelValue:ce.value,"onUpdate:modelValue":e[16]||(e[16]=s=>ce.value=s),transfer:!1,"popper-class":"popperClass2"},{content:S(()=>[oe.value?(o(),n("div",Za,[Ya,E(" "+c(t.$t("aiSearch.导出中"))+"... ",1)])):(o(),n(x,{key:1},[a("div",{class:"popperClass2-item",onClick:e[14]||(e[14]=s=>f(Ie)("DOCX"))},c(t.$t("public.导出"))+"word ",1),a("div",{class:"popperClass2-item",onClick:e[15]||(e[15]=s=>f(Ie)("PDF"))},c(t.$t("public.导出"))+"PDF ",1)],64))]),default:S(()=>[Qa]),_:1},8,["modelValue"])):u("",!0)]),_:1})])]),C(h,null,{default:S(()=>[a("div",es,[F.value?(o(),V(pt,{key:0,class:"inquiry-content",modelValue:se.value,"onUpdate:modelValue":e[17]||(e[17]=s=>se.value=s),type:"textarea",rows:3,placeholder:"继续提问..."},null,8,["modelValue"])):u("",!0),F.value?(o(),n("div",{key:1,class:"input-btn",onClick:e[18]||(e[18]=(...s)=>f(De)&&f(De)(...s))},c(t.$t("public.搜索")),1)):u("",!0)])]),_:1})],4)])):u("",!0),(o(!0),n(x,null,ee(k.value,(s,H)=>(o(),n(x,null,[t.$isEmpty(s.content)?u("",!0):(o(),n("li",{class:te(["item",s.status?"active":""]),key:H,onClick:Y=>s.status=!s.status},[a("div",as,[a("img",{src:s.icon,alt:""},null,8,ss),E(" "+c(s.name)+" ",1),t.$isEmpty(s.content)?u("",!0):(o(),n("text",os,c(JSON.parse(s.content).length),1)),a("div",ns,[E(c(s.status?t.$t("public.收起"):t.$t("public.展开"))+" ",1),ls])]),t.$isEmpty(s.content)?u("",!0):(o(),n("div",is,[s.key=="RELATED_EVENTS"||s.key=="ORGANIZE"||s.key=="CHARACTER"?(o(),V(f(z),{key:0,columns:s.columns,data:JSON.parse(s.content)||[],onClick:e[19]||(e[19]=me(()=>{},["stop"]))},null,8,["columns","data"])):u("",!0),s.key=="REFERENCES"?(o(),n("div",cs,[t.$isEmpty(s.content)?u("",!0):(o(!0),n(x,{key:0},ee(JSON.parse(s.content),(Y,ht)=>(o(),n("a",{class:"text-hide-2",target:"_blank",href:Y.seeMoreUrl},c(ht+1)+" "+c(Y.title),9,us))),256))])):u("",!0)]))],10,ts))],64))),256))])])],32),j.value?(o(),n("div",rs,[a("div",ds,[a("div",ps,[a("div",{class:te(["title-item",N.value==1?"title-item-active":""]),onClick:e[20]||(e[20]=s=>Ue(1)),style:{display:"flex"}},[N.value==1?(o(),n("img",vs)):(o(),n("img",ms)),E(" "+c(t.$t("aiSearch.大纲")),1)],2),a("div",{class:te(["title-item",N.value==2?"title-item-active":""]),onClick:e[21]||(e[21]=s=>Ue(2)),style:{display:"flex","margin-left":"24px"}},[N.value==2?(o(),n("img",hs)):(o(),n("img",_s)),E(" "+c(t.$t("aiSearch.脑图")),1)],2)]),a("div",{class:"content",style:Fe({"overflow-y":t.$isEmpty(m.value)?"hidden":"auto"})},[t.$isEmpty(m.value)?(o(),n("div",fs,[gs,E(" "+c(t.$t("aiSearch.大纲生成中"))+"... ",1)])):u("",!0),a("div",ys,[N.value==1?(o(),V(qe,{key:0,content:m.value},null,8,["content"])):u("",!0),N.value==2?(o(),n(x,{key:1},[a("div",ks,[y.value?(o(),n("svg",Cs)):u("",!0)]),a("div",Es,[ie.value?(o(),n("div",Ss)):(o(),n(x,{key:1},[a("img",{class:"action-item",onClick:e[22]||(e[22]=me(s=>f(Te)(1),["stop"])),src:Ot}),a("img",{class:"action-item",onClick:e[23]||(e[23]=me(s=>f(Te)(2),["stop"])),src:xt})],64))])],64)):u("",!0)])],4),t.$isEmpty(m.value)?u("",!0):(o(),n("div",{key:0,class:"createPPT",onClick:e[24]||(e[24]=(...s)=>f(Ne)&&f(Ne)(...s))},[As,a("div",Rs,[bs,a("div",null,c(t.$t("public.生成"))+"PPT",1)]),$s]))])])):u("",!0)])]),C(Qt,{ref_key:"pptRef",ref:G},null,512),C(vt,{ref_key:"previewImgRef",ref:U},null,512),A.value?(o(),n("div",Is,Ls)):u("",!0),C(mt,{ref_key:"ossUploaderNewRef",ref:I,style:{display:"none"},onUploadSuccess:et},null,512)])}}});const Qs=At(Ns,[["__scopeId","data-v-d05fa6fd"]]);export{Qs as default};
