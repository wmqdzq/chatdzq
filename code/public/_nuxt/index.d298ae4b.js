import{G as Q,o as u,i as d,C as X,D as Y,y as s,a as _e,e as fe,b as he,r as n,w as V,h as J,F as j,s as W,c as ge,j as i,k as v,l as R,x as S,u as K,m as ye,_ as Le,v as Ce,A as be}from"./entry.d811778a.js";import{_ as Se,c as $e}from"./index.62e926d2.js";import{_ as Z}from"./robot.23bfda18.js";import{_ as xe}from"./hot.d804d2cf.js";import{_ as ke}from"./icon13.a12257fc.js";import{r as Ie}from"./recordNew.b010c077.js";import{i as Re}from"./templateNew.99d0330c.js";import"./_commonjsHelpers.86de73f2.js";import"./_commonjs-dynamic-modules.302442b1.js";import"./sPrompt.b2a29269.js";import"./close.79d7cbfd.js";import"./icon10.dda11adf.js";import"./edit1.66aaae0f.js";import"./del1.900d6e9b.js";import"./icon14.d8f5d4e2.js";import"./delete.93bc223f.js";import"./ossUploaderNew.392fe014.js";import"./upload.51048db5.js";import"./svga.1e6ae788.js";import"./loding.bf55ea5c.js";import"./stringify.f484c508.js";import"./previewImg.3bbe8181.js";import"./cCreate.07dee42e.js";import"./addBase.8fac3ed3.js";import"./curriculum.943a89fc.js";import"./unit.b72b5b5d.js";import"./copy.ac3b57f3.js";import"./switch.ceeadd7d.js";import"./content.8ac9cfa6.js";import"./avatar.476f89d8.js";import"./barrage.9aa0fca8.js";import"./close3.bdd7467f.js";const Ee=""+new URL("nodata.1d5b0aa9.png",import.meta.url).href;const Ne={},Ge=_=>(X("data-v-e1e98c78"),_=_(),Y(),_),we={class:"noData"},Ae=Ge(()=>s("img",{src:Ee},null,-1)),Te=[Ae];function Pe(_,z){return u(),d("div",we,Te)}const Ue=Q(Ne,[["render",Pe],["__scopeId","data-v-e1e98c78"]]),F=_=>(X("data-v-c72b650d"),_=_(),Y(),_),Be={class:"employeePages"},De={class:"employee-list"},Fe=F(()=>s("div",{class:"title"},"推荐数字员工",-1)),ze={key:0,class:"robotListCom clearfix"},Me=["src"],He={key:1,class:"logo",src:Z,alt:""},qe={class:"text-hide-1",style:{"margin-bottom":"0px","line-height":"20px"}},Oe={class:"text-hide-1",style:{"max-width":"264px"}},Ve={class:"text-hide-1 h23",style:{"max-width":"264px"}},Je={class:"ability text-hide-1"},je={class:"ability-tag"},We={class:"data"},Ke={key:0,class:"fl",style:{display:"flex","align-items":"center"}},Qe={style:{display:"flex","align-items":"center"}},Xe=F(()=>s("span",{class:"gray"},"@",-1)),Ye={class:"companyName text-hide",style:{"max-width":"130px"}},Ze={class:"fl"},et=F(()=>s("img",{class:"icon",src:xe,alt:""},null,-1)),tt={class:"btn"},ot=["onClick"],at={class:"employee-chat",ref:"chatArea"},st={key:0,class:"chatOperation"},nt={key:1,class:"chatGroupList"},lt={class:"employee-chat-area",ref:"chatContent"},it={class:"employee-chat-name"},rt={class:"employee-chat-content"},ut={key:0,class:"input-area"},ct=_e({__name:"index",setup(_){const z=fe(),b=he(),{proxy:l}=ye(),A=n([]),c=n({}),$=n(""),T=n(null),P=n(null),h=n(1),g=n(!1),x=n([]),U=n(!0),y=n([]),M=n(null),L=n(""),p=n({}),E=n(""),f=n({loadMore:!0,pageNo:1,pageSize:20}),B=n(!1),ee=()=>{te(),oe()},H=()=>{l.$isLogin()&&(b.resetStream(),b.abortReadingStream(),y.value=[],h.value=1,x.value=[],me(),k())},te=()=>{let t={type:"CHAT"};l.$api.queryRecommendDigitalEmployeesRobotList(t).then(e=>{A.value=e.data})},oe=()=>{let t={type:"AI_ASSISTANT"};l.$api.space_robotGetRobotInfo(t).then(e=>{c.value=e.data})},ae=()=>{B.value=!0,P.value.showFn()},se=t=>{},ne=t=>{L.value=t.promptContent,G()},le=t=>{E.value=t.recordCode,L.value=t.request,G()},N=n(""),D=n([]),C=n([]),ie=({item:t,data:e,request:a})=>{t.intentionalAnalysisType=="ROBOT"?(N.value=e.code,C.value=[]):(N.value="",D.value=[e],C.value=[e.userCode]),L.value=a,G()},G=t=>{b.resetStream(),b.abortReadingStream();let e={content:L.value,groupId:$.value,robotCode:c.value.code,attachmentFileCodeList:[],type:c.value.type,lastAiRecordCode:E.value,userCodeList:C.value,appointRobotCode:N.value};l.$isEmpty(E.value)&&y.value.push({content:L.value,type:"USER",chatType:"CHAT",imgList:l.$isEmpty(p.value.imgList)?[]:p.value.imgList,fileList:l.$isEmpty(p.value.fileList)?[]:p.value.fileList}),l.$isEmpty(p.value.imgList)||p.value.imgList.forEach(a=>{e.attachmentFileCodeList.push(a.code)}),l.$isEmpty(p.value.fileList)||p.value.fileList.forEach(a=>{e.attachmentFileCodeList.push(a.code)}),p.value={imgList:[],fileList:[]},L.value="",E.value="",l.$setAiChat(l,e,"",a=>{a&&a.content&&l.$processChatData(y.value,a,!0)})},re=()=>{g.value=!0,k()},k=()=>{if(l.$isLogin()){let t={robotCode:c.value.code,type:c.value.type,pageNo:h.value,pageSize:20};U.value&&!l.$isEmpty(c.value.code)&&l.$api.queryAiRecordGroupPageList(t).then(e=>{let a=e.data;if(h.value>1?x.value=x.value.concat(a):x.value=a,e.data&&e.data.length==0){U.value=!1;return}})}},ue=()=>{h.value=h.value+1,k()};l.$debounce(t=>{const{scrollTop:e,scrollHeight:a,clientHeight:r}=t.target;a-e-r<10&&(h.value=h.value+1,k())},300);const ce=()=>{w.value=!1,f.value.pageNo=f.value.pageNo+1,q()},de=()=>{w.value=!1},w=n(!1),pe=(t,e)=>{b.resetStream(),b.abortReadingStream(),g.value=!1,f.value.pageNo=1,$.value=t,T.value=e,y.value=[],f.value.loadMore=!0,q()},q=()=>{let t={robotCode:c.value.code,groupId:$.value,pageNo:f.value.pageNo,pageSize:f.value.pageSize};f.value.loadMore&&l.$api.queryNewAiRecordPageList(t).then(e=>{if(e.data&&e.data.length==0){f.value.loadMore=!1;return}let a=[];e.data.forEach(r=>{if(!l.$isEmpty(r.attachmentList)){r.imgList=r.imgList||[],r.fileList=r.fileList||[];const I=["JPG","JPEG","PNG","GIF","BMP","WEBP"];r.attachmentList.forEach(m=>{const o={url:m.sourceUrl,code:m.code};console.log(I.includes(m.format)),I.includes(m.format)?r.imgList.push(o):r.fileList.push({name:m.fileName,url:m.sourceUrl,size:m.fileSize??1})})}}),a.unshift(...e.data.reverse()),f.value.pageNo>1?(y.value=a.concat(y.value),M.value.toMediate()):y.value=a})},me=()=>{let t={type:c.value.type,robotCode:c.value.code};l.$api.ai_bulidChatGroupId(t).then(e=>{$.value=e.data,T.value=null})};return ee(),V(()=>b.electric,t=>{h.value=1,U.value=!0,T.value=0,k()},{deep:!0}),V(()=>C.value,t=>{N.value=""},{deep:!0}),(t,e)=>{const a=J("Tooltip"),r=Le,I=Se,m=J("Icon");return u(),d("div",Be,[s("div",De,[Fe,t.$isEmpty(A.value)?(u(),ge(Ue,{key:1,class:"mt-140"})):(u(),d("div",ze,[(u(!0),d(j,null,W(A.value,(o,ve)=>(u(),d("div",{class:Ce(["item",t.btnType==2?"item1":t.btnType==3?"item2":""]),key:ve},[o.robotLogo?(u(),d("img",{key:0,class:"logo",src:o.robotLogo,alt:""},null,8,Me)):(u(),d("img",He)),s("h2",qe,[i(r,null,{default:v(()=>[i(a,{content:o.name,"max-width":"200"},{default:v(()=>[s("div",Oe,S(o.name),1)]),_:2},1032,["content"])]),_:2},1024)]),i(r,null,{default:v(()=>[i(a,{content:o.robotRemark,"max-width":"200"},{default:v(()=>[s("p",Ve,S(o.robotRemark),1)]),_:2},1032,["content"])]),_:2},1024),s("div",Je,[(u(!0),d(j,null,W(o.labelList,(O,dt)=>(u(),d("div",je,S(O),1))),256))]),s("div",We,[t.$isEmpty(o.creator)?R("",!0):(u(),d("div",Ke,[i(r,null,{default:v(()=>[i(a,{content:o.creator,"max-width":"200"},{default:v(()=>[s("div",Qe,[Xe,s("span",Ye,S(o.creator),1)])]),_:2},1032,["content"])]),_:2},1024)])),s("div",Ze,[et,be(" "+S(o.hotUseCount),1)])]),s("div",tt,[s("span",{class:"blue",onClick:O=>K(z).push("/ai/employee/info?code="+o.code)},"对话",8,ot)])],2))),128))]))]),s("div",at,[g.value?R("",!0):(u(),d("div",st,[i(r,null,{default:v(()=>[i(a,{content:"历史记录",placement:"right"},{default:v(()=>[s("img",{onClick:re,src:ke,alt:""})]),_:1})]),_:1})])),g.value?(u(),d("div",nt,[i(I,{state:g.value,"onUpdate:state":e[0]||(e[0]=o=>g.value=o),list:x.value,onAdd:H,onSwitchGroup:pe,onScrollBottom:ue},null,8,["state","list"])])):R("",!0),s("div",lt,[s("div",it,S(c.value.name),1),s("div",rt,[i(Ie,{ref_key:"recordComRef",ref:M,isLoading:w.value,"onUpdate:isLoading":e[1]||(e[1]=o=>w.value=o),robotLogo:c.value.robotLogo||K(Z),chatList:y.value,onScrollTop:ce,onScrollBottom:de,userCodeList:C.value,"onUpdate:userCodeList":e[2]||(e[2]=o=>C.value=o),onEmployee:ie,onGetContent:se,groupId:$.value,shareState:t.shareState,"onUpdate:shareState":e[3]||(e[3]=o=>t.shareState=o),onAnswer:le,onSubmit:t.onEditSubmitChat},null,8,["isLoading","robotLogo","chatList","userCodeList","groupId","shareState","onSubmit"]),t.shareState?R("",!0):(u(),d("div",ut,[i(a,{content:"创建新对话",class:"input-icon input-addChat iconCom",placement:"top"},{default:v(()=>[s("div",{class:"icon",onClick:H},[i(m,{type:"md-add",color:"#0090F7"})])]),_:1}),i(Re,{content:L.value,"onUpdate:content":e[4]||(e[4]=o=>L.value=o),format:t.format,uploadLists:p.value,"onUpdate:uploadLists":e[5]||(e[5]=o=>p.value=o),robotCode:c.value.code,consumeEnergy:c.value.consumeEnergy,onSubmit:G,isUoload:!0,isAppoint:!0,robotInfo:c.value,userList:D.value,"onUpdate:userList":e[6]||(e[6]=o=>D.value=o),userCodeList:C.value,"onUpdate:userCodeList":e[7]||(e[7]=o=>C.value=o)},null,8,["content","format","uploadLists","robotCode","consumeEnergy","robotInfo","userList","userCodeList"]),i(a,{content:"找找灵感",class:"input-icon iconCom input-prompt",placement:"top"},{default:v(()=>[s("div",{class:"icon",onClick:ae},[i(m,{type:"ios-bulb-outline"})])]),_:1})]))])],512),i($e,{ref_key:"cPromptRef",ref:P,onPrompt:ne},null,512)],512),g.value||B.value?(u(),d("div",{key:0,class:"mask",onClick:e[8]||(e[8]=o=>{g.value=!1,B.value=!1,P.value.onClose()})})):R("",!0)])}}});const Ot=Q(ct,[["__scopeId","data-v-c72b650d"]]);export{Ot as default};
