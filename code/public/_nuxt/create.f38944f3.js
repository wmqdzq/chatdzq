import{_ as P}from"./left-arrow.8a611274.js";import{_ as G,a as Y,b as z}from"./mail.7668b8e3.js";import{_ as K}from"./list.6dc0d39f.js";import{_ as J}from"./electric.251d62b3.js";import{a as X,b as H,r as i,e as O,f as W,h as L,i as v,y as t,u as N,x as s,j as _,A as B,l as j,F as x,s as U,k as V,X as Z,C as tt,D as et,m as st,o as p,G as it}from"./entry.d811778a.js";import ot from"./vitae.1c04a915.js";import at from"./vitaePreview.f9593eda.js";import"./_commonjsHelpers.86de73f2.js";import"./_commonjs-dynamic-modules.302442b1.js";const nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAANFJREFUWEftlr0JAkEQRt8HCtqDgSUYGGggBlZgBxZgYBl2YQt2YCiCgSUY2IMXCCvKBXLcHOyysCCz6Swz3775W1H4qHB8XIATSCIQQpgCZ6BXF3EFLCRdY4s6VcAGODSCrSUdXYAT+B8CdauNjBctgV3Dtgcuxv27pFubzWzDEMITGMQiNe6/JPVjBYRMwb9uJLU+totAcQE5U1BJGsamYAKMjTSsgG1EET6sPeG7wAk4gVQCM+D0M6o/X7K5Ne+7JmqSgKwjOqezFF9OwAm8AVkFaCEAglxMAAAAAElFTkSuQmCC",lt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIZJREFUWEftlTsKhUAQBLsCQe9g4BFe4P1PYOARDLyDBg9GMPbDwsAa9MbLdG01zKLKh8r5MoAN2IAN2MB3DUTEKKlP+isWYL6adWsgIjZJbRLAH2hKASIp/BwDXD72yUB1gMwKdqArreAnaUiqYQWmIoCk4Ncx390Dr+hJF2zABmzABmzgAGJrHCH8NIw+AAAAAElFTkSuQmCC",l=f=>(tt("data-v-2d13a023"),f=f(),et(),f),ct={class:"create"},dt={class:"create-left"},rt={class:"left-top"},ut={class:"left-content"},vt={class:"content-top"},_t={class:"top-name"},pt={class:"describe"},ht={class:"vitae"},mt={class:"vitae-left"},At={class:"vitae-left-name"},gt=l(()=>t("img",{src:Y},null,-1)),ft={style:{margin:"0 3px"}},Ct={class:"vitae-left-num"},wt=l(()=>t("img",{src:z},null,-1)),yt={class:"vitae-right"},Rt={class:"right-time"},kt={class:"degree"},Bt={class:"degree-top"},It=l(()=>t("div",{class:"degree-top-left"},[t("img",{src:K}),t("div",null,"简历匹配度")],-1)),Et={class:"degree-top-right"},Qt={class:"degree-content"},St={class:"create-right"},Lt=l(()=>t("div",{class:"right-top"},[t("div",{style:{"text-align":"center",width:"80px",display:"flex","flex-wrap":"wrap","justify-content":"center"}},[t("div",null,"简历列表"),t("div",{class:"line"})])],-1)),Nt={class:"right-content"},xt={class:"content-top"},Ut=l(()=>t("div",null,"题目数量",-1)),Vt={class:"content-top-input"},bt={key:0,class:"tag"},Tt=l(()=>t("img",{src:J},null,-1)),qt={class:"content-list"},Ft={class:"list-item",style:{"margin-right":"12px"}},Mt=l(()=>t("div",{class:"title"},"已生成题目",-1)),$t={class:"item-content"},Dt={class:"item"},Pt={style:{width:"60px"}},Gt={class:"content"},Yt={class:"action"},zt=["onClick"],Kt=l(()=>t("img",{src:nt},null,-1)),Jt=[Kt],Xt={class:"list-item"},Ht={class:"title"},Ot={class:"item-content"},Wt={class:"item"},jt={style:{width:"60px"}},Zt={class:"content"},te={class:"action"},ee=["onClick"],se=l(()=>t("img",{src:lt},null,-1)),ie=[se],oe={class:"link"},ae=l(()=>t("div",{class:"link-top"},"答题链接（二维码）",-1)),ne={class:"link-action"},le={class:"input"},ce={class:"qrCode"},de=X({__name:"create",setup(f){const b=H(),C=i({name:"",description:""}),I=i(),h=i(),{proxy:c}=st(),E=i(),a=i({}),r=O(),T=i([]),d=i([]),u=i([]),q=i(0),y=i(null),m=i(!1),A=i(!1),R=i(10),k=()=>{let o={code:r.currentRoute.value.query.code};c.$api.getResumeInfo(o).then(e=>{if(a.value=e.data,e.data.dataStatus!="NOT_WRITTEN_TEST"){r.push("/ai/hr/analyze?code="+r.currentRoute.value.query.code);return}e.data&&e.data.interviewQuestionAnswerList&&e.data.interviewQuestionAnswerList.length>0&&(T.value=e.data.interviewQuestionAnswerList,q.value=e.data.interviewQuestionAnswerList.length,d.value=[],u.value=e.data.interviewQuestionAnswerList),c.$api.getPosition({code:e.data.partyRelationId}).then(w=>{C.value.name=w.data.name,C.value.description=w.data.description})}),c.$api.queryElectricity({type:"HR_GENERATE_QUESTION"}).then(e=>{e.data&&e.data.electricityVal&&(y.value=e.data.electricityVal)})},F=()=>{if(m.value)return;let o={questionCount:Number(R.value),resourceCode:a.value.resourceCode,positionCode:a.value.partyRelationId};m.value=!0,c.$api.generateQuestion(o).then(e=>{u.value=u.value.concat(e.data.interviewQuestionsList),m.value=!1,c.$Message.success("已生成"),b.getUserPoints(c)}).catch(()=>{m.value=!1})},Q=(o,e)=>{e==1&&(u.value.unshift(d.value[o]),d.value.splice(o,1)),e==2&&(d.value.unshift(u.value[o]),u.value.splice(o,1))},M=()=>{if(d.value.length==0){c.$Message.error("请选择题目");return}if(A.value)return;let o={resumeCode:r.currentRoute.value.query.code,interviewQuestionsAnswerReqList:d.value};A.value=!0,c.$api.addExamInstance(o).then(()=>{c.$Message.success("已确认题目"),A.value=!1,k()}).catch(()=>{A.value=!1})},$=()=>{window.open(h.value+"?type=preview")};return W(()=>{k(),h.value=window.location.origin+"/share/answer/"+r.currentRoute.value.query.code}),(o,e)=>{const w=L("Input"),S=L("Button");return p(),v("div",ct,[t("div",dt,[t("div",rt,[t("img",{onClick:e[0]||(e[0]=n=>N(r).push("/ai/hr")),src:P}),t("div",{onClick:e[1]||(e[1]=n=>N(r).push("/ai/hr")),class:"name"},"简历")]),t("div",ut,[t("div",vt,[t("div",_t,[t("div",null,s(C.value.name),1)]),t("div",pt,s(C.value.description),1),t("div",ht,[t("div",mt,[t("div",At,[gt,t("div",ft,s(a.value.name),1),t("img",{class:"edit",onClick:e[2]||(e[2]=n=>E.value.showFn(a.value)),src:G})]),t("div",Ct,[wt,t("div",null,s(a.value.email)+" "+s(a.value.phone),1)])]),t("div",yt,[t("div",{class:"right-btn",onClick:e[3]||(e[3]=n=>I.value.showFn(a.value.resourceUrl))},"简历预览"),t("div",Rt,s(a.value.gmtCreate)+"上传",1)])]),t("div",kt,[t("div",Bt,[It,t("div",Et,s(a.value.matchDegree)+"%",1)]),t("div",Qt,[t("div",null,s(a.value.matchDescription),1)])])])])]),t("div",St,[Lt,t("div",Nt,[t("div",xt,[Ut,t("div",Vt,[_(w,{type:"number",modelValue:R.value,"onUpdate:modelValue":e[4]||(e[4]=n=>R.value=n),min:1,max:20,class:"input"},null,8,["modelValue"]),t("div",{class:"btn",onClick:F},[B(s(m.value?"生成中...":"再次生成")+" ",1),y.value?(p(),v("div",bt,[Tt,t("div",null,s(y.value)+"电量",1)])):j("",!0)])])]),t("div",qt,[t("div",Ft,[Mt,t("div",$t,[(p(!0),v(x,null,U(u.value,(n,g)=>(p(),v("div",Dt,[t("div",Pt,"题目"+s(g+1)+"：",1),t("div",Gt,s(n.question),1),t("div",Yt,[t("div",{class:"addPoint",onClick:D=>Q(g,2)},Jt,8,zt)])]))),256))])]),t("div",Xt,[t("div",Ht,"已选择"+s(d.value.length)+"题",1),t("div",Ot,[(p(!0),v(x,null,U(d.value,(n,g)=>(p(),v("div",Wt,[t("div",jt,"题目"+s(g+1)+"：",1),t("div",Zt,s(n.question),1),t("div",te,[t("div",{class:"redPoint",onClick:D=>Q(g,1)},ie,8,ee)])]))),256))]),t("div",{class:"confirm",onClick:M},s(A.value?"确认中...":"确认题目"),1)])]),t("div",oe,[ae,t("div",ne,[t("div",le,s(h.value),1),_(S,{type:"primary",class:"btn",onClick:e[5]||(e[5]=n=>o.$CopyTex(h.value))},{default:V(()=>[B("复制")]),_:1}),_(S,{class:"btn",onClick:$},{default:V(()=>[B("预览")]),_:1})]),t("div",ce,[_(Z,{value:h.value,size:146,level:"H","render-as":"svg"},null,8,["value"])])])])]),_(ot,{ref_key:"vitaeRef",ref:E,onInit:k},null,512),_(at,{ref_key:"vitaePreviewRef",ref:I},null,512)])}}});const fe=it(de,[["__scopeId","data-v-2d13a023"]]);export{fe as default};
