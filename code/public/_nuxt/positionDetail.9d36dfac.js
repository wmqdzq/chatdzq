import{a as j,r as _,e as A,h as p,i as n,y as t,u as b,x as i,j as c,k as r,F as f,s as E,m as G,_ as H,C as J,D as K,o as a,c as Q,A as S,l as m,z as w,E as X,G as Y}from"./entry.d811778a.js";import{_ as Z}from"./left-arrow.8a611274.js";import{_ as tt,a as et,b as st}from"./mail.7668b8e3.js";import{_ as ot,a as at}from"./delete.35f42c71.js";import nt from"./positions.ce4b3adc.js";import it from"./vitae.1c04a915.js";import"./_commonjsHelpers.86de73f2.js";import"./_commonjs-dynamic-modules.302442b1.js";import"./electric.251d62b3.js";import"./associate.0137b106.js";import"./close.a046fc4f.js";const x=k=>(J("data-v-ea65b8dc"),k=k(),K(),k),lt={class:"positionDetail"},ct={class:"detail-left"},dt={class:"left-top"},_t={class:"left-content"},ut={class:"content-top"},rt={class:"top-name"},vt={class:"describe"},pt={class:"detail-right"},mt=x(()=>t("div",{class:"right-top"},[t("div",{style:{"text-align":"center",width:"80px",display:"flex","flex-wrap":"wrap","justify-content":"center"}},[t("div",null,"简历列表"),t("div",{class:"line"})])],-1)),ht={class:"right-content"},gt={class:"content-search"},ft={class:"content-table"},kt=["onClick"],yt={class:"item-content-left"},Tt={class:"item-content-user"},Ct={class:"user"},Et=x(()=>t("img",{src:et},null,-1)),St={class:"mail"},xt=x(()=>t("img",{src:st},null,-1)),It={class:"text-hide"},Vt={class:"item-content-message"},Nt={class:"message-item"},Dt={class:"degree"},Rt={class:"time"},$t={key:0,class:"message-item"},bt={class:"mark"},wt={class:"time"},Ot={class:"item-content-right"},Pt={class:"right-state"},Bt={key:0,class:"grayPoint"},Wt={key:1,class:"greenPoint"},Lt={key:2,class:"redPoint"},zt={key:3,class:"brownPoint"},Ft={style:{"white-space":"nowrap"}},Mt={class:"right-action"},qt={class:"action-ico"},Ut=["onClick"],jt={class:"action-ico"},At=["onClick"],Gt={class:"content-page"},Ht=j({__name:"positionDetail",setup(k){const{Modal:O}=X,I=_(),V=_([]),{proxy:u}=G(),N=_(),y=_(!1),T=_(!1),v=A(),l=_({pageNo:1,total:0,pageSize:10,positionCode:"",condition:"",dataStatus:""}),D=_([{name:"全部",value:""},{name:"未通过初筛",value:"NO_FILTERED"},{name:"未笔试",value:"NOT_WRITTEN_TEST"},{name:"待查看",value:"TO_BE_VIEWED"},{name:"已查看",value:"VIEWED"}]),d=_({}),P=()=>{C()},h=()=>{let o={code:v.currentRoute.value.query.code};u.$api.getPosition(o).then(s=>{d.value=s.data}),l.value.positionCode=v.currentRoute.value.query.code,C()},C=()=>{T.value=!0,u.$api.queryResumePageList(l.value).then(o=>{V.value=o.data,T.value=!1,l.value.total=o.totalCount}).catch(()=>{T.value=!1})},B=o=>{o.dataStatus=="NOT_WRITTEN_TEST"?v.push("/ai/hr/create?code="+o.code):v.push("/ai/hr/analyze?code="+o.code)},W=o=>{o&&O.confirm({okText:"确定",cancelText:"取消",content:"是否删除该简历?",onOk:()=>{let s={code:o.code};u.$api.deleteResume(s).then(()=>{u.$Message.success("已删除"),h()})}})};return u.$debounce(()=>{if(y.value)return;y.value=!0;let o={code:d.value.code,name:d.value.name,description:d.value.description};u.$api.editPosition(o).then(()=>{y.value=!1,u.$Message.success("已保存"),h()}).catch(()=>{y.value=!1})},300),h(),(o,s)=>{const L=p("Input"),z=p("Option"),F=p("Select"),R=H,M=p("Button"),$=p("Tooltip"),q=p("Page");return a(),n("div",lt,[t("div",ct,[t("div",dt,[t("img",{onClick:s[0]||(s[0]=e=>b(v).push("/ai/hr")),src:Z}),t("div",{onClick:s[1]||(s[1]=e=>b(v).push("/ai/hr")),class:"name"},"职位")]),t("div",_t,[t("div",ut,[t("div",rt,[t("div",null,i(d.value.name),1),t("img",{onClick:s[2]||(s[2]=e=>N.value.showFn(d.value)),src:tt})]),t("div",vt,[t("div",null,i(d.value.name),1),t("div",null,i(d.value.description),1)])])])]),t("div",pt,[mt,t("div",ht,[t("div",gt,[c(L,{prefix:"ios-search",modelValue:l.value.condition,"onUpdate:modelValue":s[3]||(s[3]=e=>l.value.condition=e),placeholder:"输入姓名或联系方式搜索",class:"input"},null,8,["modelValue"]),c(R,null,{default:r(()=>[c(F,{class:"select",modelValue:l.value.dataStatus,"onUpdate:modelValue":s[4]||(s[4]=e=>l.value.dataStatus=e),clearable:""},{default:r(()=>[(a(!0),n(f,null,E(D.value,e=>(a(),Q(z,{value:e.value,key:e.value},{default:r(()=>[S(i(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),c(M,{type:"primary",class:"btn",onClick:C,loading:T.value},{default:r(()=>[S("搜索简历")]),_:1},8,["loading"])]),t("div",ft,[(a(!0),n(f,null,E(V.value,(e,U)=>(a(),n("div",{class:"table-item",key:U},[t("div",{class:"item-content",onClick:g=>B(e)},[t("div",yt,[t("div",Tt,[t("div",Ct,[Et,t("div",null,i(e.name),1)]),t("div",St,[xt,t("div",It,i(e.phone)+" "+i(e.email),1)])]),t("div",Vt,[t("div",Nt,[t("div",Dt,"匹配度 "+i(e.matchDegree)+"%",1),t("div",Rt,i(e.gmtCreate)+"上传",1)]),e.point?(a(),n("div",$t,[t("div",bt,"评分 "+i(e.point)+"分",1),t("div",wt,i(e.gmtWrittenExam)+"笔试",1)])):m("",!0)])]),t("div",Ot,[t("div",Pt,[e.dataStatus=="NO_FILTERED"?(a(),n("div",Bt)):m("",!0),e.dataStatus=="VIEWED"?(a(),n("div",Wt)):m("",!0),e.dataStatus=="NOT_WRITTEN_TEST"?(a(),n("div",Lt)):m("",!0),e.dataStatus=="TO_BE_VIEWED"?(a(),n("div",zt)):m("",!0),t("div",Ft,[(a(!0),n(f,null,E(D.value,g=>(a(),n(f,null,[g.value==e.dataStatus?(a(),n(f,{key:0},[S(i(g.name),1)],64)):m("",!0)],64))),256))])]),t("div",Mt,[c(R,null,{default:r(()=>[c($,{content:"编辑"},{default:r(()=>[t("div",qt,[t("img",{class:"ico",onClick:w(g=>I.value.showFn(e),["stop"]),src:ot},null,8,Ut)])]),_:2},1024),c($,{content:"删除"},{default:r(()=>[t("div",jt,[t("img",{class:"ico",onClick:w(g=>W(e),["stop"]),src:at},null,8,At)])]),_:2},1024)]),_:2},1024)])])],8,kt)]))),128))]),t("div",Gt,[c(q,{modelValue:l.value.pageNo,"onUpdate:modelValue":s[5]||(s[5]=e=>l.value.pageNo=e),total:l.value.total,"page-size":l.value.pageSize,onOnChange:P,"show-elevator":""},null,8,["modelValue","total","page-size"])])])]),c(nt,{ref_key:"positionsRef",ref:N,onInit:h},null,512),c(it,{ref_key:"vitaeRef",ref:I,onInit:h},null,512)])}}});const ne=Y(Ht,[["__scopeId","data-v-ea65b8dc"]]);export{ne as default};
