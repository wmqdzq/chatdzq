import{_ as b}from"./ossUploaderNew.392fe014.js";import{a as K,r as i,e as M,b as O,f as G,h as V,i as p,j as s,k as c,F as L,J as v,K as F,o as g,A as J,y as o,x,u as I,m as Y,_ as j,C as D,D as Q,G as T}from"./entry.d811778a.js";import W from"./phone.9cb2e3b3.js";import $ from"./pwd.2a67e63c.js";import P from"./nickname.c49f7bca.js";import"./upload.51048db5.js";import"./svga.1e6ae788.js";import"./loding.bf55ea5c.js";import"./stringify.f484c508.js";import"./_commonjsHelpers.86de73f2.js";import"./_commonjs-dynamic-modules.302442b1.js";const H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAANBJREFUWEftV0sKwjAUnIcgZldvoCfTG5iewN7AeAM9mb2BWRkQIYVK81kIzaO2m9f1m8xnMUMJC3+0MD/4Aq7vA/zHAGRBqwan9Z1jhi/AuAeA3ZeULPRmO7cAnxFqxTLDAvXExokASUASkAQmTiB2e8Wp1AJMm25HbMKs2wueY53G7UgEvJ4A/dv9ILeFVvt+xoKBizuCcI4Lx7I2AuQtPNWo1S0XMAKancgYSQKSgCQgCZhsO0K3lxYq/78gbIev0m6fT0Ap0497fgITCegAgglnIfhWOEkAAAAASUVORK5CYII=",X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAALVJREFUOE+9030NwjAUBPA7B0gAB0gAB5sCtKAEHCABcDAHzAE4OHikS5rx+rGkocn+3K/3ri3RYLGBgf8hkraWmOTgJS8mCcAl/Nx7UBaJgD4ghv1ASSQGpt0ldQBOADYkX9NoLpIA1gCun2qOJM9xNynkCWAfJUgC38K9tiU9AjJKygI5xGLbugM4eCPUjGP3wj5LMc47mKdPjWNJdpknYX3dak5nlUGG4hEvfZTFa18DNkHe/9tMEmsG3DwAAAAASUVORK5CYII=",l=u=>(D("data-v-4abfcba6"),u=u(),Q(),u),q=l(()=>o("div",{class:"modal-title"},"账户信息",-1)),z={class:"account-content"},Z={class:"logo-item flex-jc"},ee={key:0,class:"add",src:H,alt:""},oe=["src"],te=l(()=>o("img",{class:"edit",src:X,alt:""},null,-1)),ae={class:"user-item"},ne=l(()=>o("div",{class:"name"},"昵称",-1)),se={class:"input"},ce={class:"user-item"},le=l(()=>o("div",{class:"name"},"已绑定手机号",-1)),ie={class:"input"},ue={class:"user-item"},de=l(()=>o("div",{class:"name"},"登录密码",-1)),Ae={class:"input"},me=l(()=>o("div",null,"******",-1)),_e=K({__name:"accountModel",setup(u,{expose:R}){const{proxy:a}=Y(),d=i(!1),U=M(),A=O(),e=i({code:"",nickName:"",phone:"",email:"",avatar:""});G(()=>{});const f=i(),h=i(),k=i(),C=n=>{switch(n){case"nicknameRef":f.value.showFn(e.value);break;case"phoneRef":h.value.showFn(e.value);break;case"pwdRef":console.log(e.value),k.value.showFn(e.value);break}},w=()=>{var t;((t=document.getElementById("cImage-upload"))==null?void 0:t.getElementsByClassName("upload-input")[0]).click()},m=()=>{if(a.$isEmpty(e.value.code)){_();return}let n={code:e.value.code};a.$api.getLoginAccount(n).then(t=>{e.value=t.data,d.value=!0,A.getUserPoints(a)})},y=n=>{e.value.avatar=n[0].url;let t={avatar:e.value.avatar,code:e.value.code,email:e.value.email,nickName:e.value.nickName,phone:e.value.phone};a.$api.editLoginAccount(t).then(()=>{a.$Message.success("头像已更改"),A.getUserPoints(a),A.getChatLogo(a),m()})},_=()=>{v("secretKey").value=null,U.push("/login")};return R({showFn:()=>{v("authtoken").value?(e.value.code=v("authtoken").value.loginCode,m()):_()}}),(n,t)=>{const B=b,N=j,S=V("Button"),E=F;return g(),p(L,null,[s(E,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=r=>d.value=r),"mask-closable":!1,"class-name":"account-container",modalWidth:400},{header:c(()=>[q]),footer:c(()=>[s(S,{type:"primary",onClick:_},{default:c(()=>[J("退出登录")]),_:1})]),default:c(()=>[o("div",z,[o("div",Z,[s(N,null,{default:c(()=>[s(B,{id:"cImage-upload",modeType:"freedom",onUploadSuccess:y},{content:c(()=>[o("div",{onClick:w,class:"logo flex flex-c-c"},[e.value.avatar?(g(),p("img",{key:1,src:e.value.avatar,alt:""},null,8,oe)):(g(),p("img",ee)),te])]),_:1})]),_:1})]),o("div",ae,[ne,o("div",se,[o("div",null,x(I(a).$isEmpty(e.value.nickName)?"暂未设置":e.value.nickName),1),o("div",{class:"btn",onClick:t[0]||(t[0]=r=>C("nicknameRef"))},"编辑")])]),o("div",ce,[le,o("div",ie,[o("div",null,x(I(a).$isEmpty(e.value.phone)?"暂未设置":e.value.phone),1)])]),o("div",ue,[de,o("div",Ae,[me,o("div",{class:"btn",onClick:t[1]||(t[1]=r=>C("pwdRef"))},"设置")])])])]),_:1},8,["modelValue"]),s(P,{ref_key:"nicknameRef",ref:f,onInit:m},null,512),s(W,{ref_key:"phoneRef",ref:h},null,512),s($,{ref_key:"pwdRef",ref:k},null,512)],64)}}});const we=T(_e,[["__scopeId","data-v-4abfcba6"]]);export{we as default};
