import{_ as g}from"./_commonjsHelpers.86de73f2.js";import{G as w,r as h,P as B,f as V,w as R,o as u,i as m,F as U,s as W,l as C,a as E,c as M,k as N,K as T,y as F,j as I}from"./entry.d811778a.js";import"./_commonjs-dynamic-modules.302442b1.js";const D={key:0,class:"pdf-preview-box"},L=["id"],O={__name:"cPdf",props:{pdfUrl:{type:String,default:"",required:!0},containerWidth:{type:Number,default:400,required:!0}},setup(v){const a=v,r=h(!1),n=B({currentPageNumber:1,pdfScale:1,pdfPageTotal:0});let f=null;V(()=>{});const l=async()=>{let t=await g(()=>import("./pdf.17fa2724.js").then(e=>e.p),["./pdf.17fa2724.js","./_commonjsHelpers.86de73f2.js","./_commonjs-dynamic-modules.302442b1.js","./entry.d811778a.js","./entry.4d0e96df.css"],import.meta.url),s=await g(()=>import("./pdf.worker.entry.e1f5a8dd.js").then(e=>e.p),[],import.meta.url);t.GlobalWorkerOptions.workerSrc=s,t.getDocument(a.pdfUrl).promise.then(async e=>{f=e,n.pdfPageTotal=e.numPages;for(let o=1;o<=e.numPages;o++)await _(o)})},_=t=>new Promise((s,e)=>{f.getPage(t).then(o=>{const c=document.getElementById(`pdf-render${t}`),i=c.getContext("2d"),P=window.devicePixelRatio||1,x=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,p=P/x,d=o.getViewport({scale:n.pdfScale}),k=Math.floor(d.width*p),y=Math.floor(d.height*p);c.width=k,c.height=y,c.style.width=Math.floor(a.containerWidth)+"px",c.style.height=Math.floor(d.height*a.containerWidth/d.width)+"px";let S={canvasContext:i,viewport:d,transform:[p,0,0,p,0,0]};o.render(S).promise.then(()=>{s()}).catch(b=>{e(b)})}).catch(o=>{e(o)})});return R(()=>a.pdfUrl,t=>{a.pdfUrl?(r.value=!0,setTimeout(()=>{l()},500)):r.value=!1},{deep:!0}),(t,s)=>r.value?(u(),m("div",D,[(u(!0),m(U,null,W(n.pdfPageTotal,e=>(u(),m("canvas",{class:"pdf-viewer",style:{width:"100%"},key:e,id:"pdf-render"+e},null,8,L))),128))])):C("",!0)}},$=w(O,[["__scopeId","data-v-f0d489da"]]),j={class:"content"},q=E({__name:"vitaePreview",setup(v,{expose:a}){const r=h(""),n=h(!1);return a({showFn:l=>{n.value=!0,r.value=l}}),(l,_)=>{const t=$,s=T;return u(),M(s,{title:"简历预览",modelValue:n.value,"onUpdate:modelValue":_[0]||(_[0]=e=>n.value=e),"mask-closable":!1,modalWidth:788},{default:N(()=>[F("div",j,[I(t,{pdfUrl:r.value,containerWidth:750},null,8,["pdfUrl"])])]),_:1},8,["modelValue"])}}});const H=w(q,[["__scopeId","data-v-e5fcbed7"]]);export{H as default};
